{"version":3,"sources":["webpack:///./src/views/LinkQR.vue?c783","webpack:///./src/views/LinkQR.vue","webpack:///src/views/LinkQR.vue","webpack:///./src/views/LinkQR.vue?7410","webpack:///./src/views/LinkQR.vue?43f3"],"names":["render","_vm","this","_c","_self","staticClass","isDeviceLinked","hasUuid","attrs","_v","_s","$t","href","isLoading","qrCodeUrl","qrCodeBg","expiresTime","timeRemaining","_e","directives","name","rawName","value","email","expression","domProps","on","$event","target","composing","class","isEmailLinking","linkViaEmail","staticRenderFns","_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","error","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","ownKeys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","_objectSpread","_defineProperty","getOwnPropertyDescriptors","defineProperties","obj","_toPropertyKey","_toPrimitive","String","input","hint","prim","toPrimitive","res","Number","components","qrcode","QrcodeVue","Loader","HtmlWithLinks","data","uuid","linkToken","pollingInterval","checkSessionInterval","lastUpdated","Date","now","computed","mapState","$store","getters","$route","query","domain","window","location","host","concat","Math","floor","remaining","max","methods","getLinkSession","_this","_callee","response","_context","cleanupIntervals","$api","success","expires_at","link_token","startCheckingSession","console","setTimeout","t0","clearInterval","checkSession","_this2","_callee2","_context2","localStorage","setItem","commit","all","dispatch","$router","errors","code","processLinkFromDevice","_this3","_callee3","_context3","lt","set_link_token","clearTimeout","_this4","_callee4","_context4","test","$notify","text","link","params","message","translated","linkText","profile_service","checkDevicesAfterLink","finally","_this5","_callee5","devices","_context5","allSettled","created","beforeDestroy","activated","deactivated","component"],"mappings":"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","file":"js/chunk-3fbacea2.dbf47dba.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkQR.vue?vue&type=style&index=0&id=b8bef0d4&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"main\"},[(_vm.isDeviceLinked && _vm.hasUuid)?_c('div',[_c('div',{staticClass:\"loader-container\"},[_c('loader',{attrs:{\"size\":\"50px\"}}),_c('p',{staticClass:\"processing-text\"},[_vm._v(_vm._s(_vm.$t('AUTHORIZING_ANOTHER_DEVICE')))])],1)]):(_vm.isDeviceLinked && !_vm.hasUuid)?_c('div',[_c('div',{staticClass:\"message-container\"},[_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.$t('NOTICE_SCAN_QR_CODE_THAT_IS_SHOWN_ON_COMPUTER')))])])]):_c('div',[_c('h1',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.$t('SCAN_QR_TO_LINK_COMPUTER')))]),_c('div',{staticClass:\"subtitle-wrapper\"},[_c('html-with-links',{staticClass:\"subtitle\",attrs:{\"tag\":\"p\",\"html\":_vm.$t('LINK_APPLE_SILICON_MAC_DESC', { href: '/appdb-tools' })}}),_c('html-with-links',{staticClass:\"subtitle tv-link\",attrs:{\"tag\":\"p\",\"html\":_vm.$t('CLICK_TO_LINK_TV', { href: '/link/tv' })}})],1),(_vm.isLoading)?_c('div',{staticClass:\"loader-container\"},[_c('loader',{attrs:{\"size\":\"50px\"}}),_c('p',{staticClass:\"processing-text\"},[_vm._v(_vm._s(_vm.$t('LOADING')))])],1):_c('div',[_c('div',{staticClass:\"qr-container\"},[_c('qrcode',{staticClass:\"qr-code\",attrs:{\"value\":_vm.qrCodeUrl,\"background\":_vm.qrCodeBg}}),(_vm.expiresTime)?_c('div',{staticClass:\"timer\"},[_vm._v(\"\\n          \"+_vm._s(_vm.timeRemaining)+\"\\n        \")]):_vm._e()],1),_c('div',{staticClass:\"email-linking\"},[_c('p',{staticClass:\"email-linking-text\"},[_vm._v(_vm._s(_vm.$t('LINK_DEVICE_BACKUP_OPTION')))]),_c('div',{staticClass:\"form__group g-code\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],staticClass:\"g-code__input\",attrs:{\"placeholder\":\"user@example.com\",\"type\":\"email\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing)return;_vm.email=$event.target.value}}}),_c('button',{staticClass:\"g-code__button\",class:{ 'g-code__button_loading': _vm.isEmailLinking },attrs:{\"type\":\"button\"},on:{\"click\":_vm.linkViaEmail}},[_c('span',{staticClass:\"g-code__loader\"}),_vm._v(\"\\n            \"+_vm._s(_vm.$t('LINK_DEVICE_BUTTON'))+\"\\n          \")])])])])]),_c('div',{staticClass:\"back-link-container\"},[_c('a',{staticClass:\"g-button back-link\",attrs:{\"href\":\"javascript:history.back()\"}},[_vm._v(_vm._s(_vm.$t('GO_BACK')))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"main\">\n    <div v-if=\"isDeviceLinked && hasUuid\">\n      <!-- Mode for linked devices with UUID parameter -->\n      <div class=\"loader-container\">\n        <loader size=\"50px\" />\n        <p class=\"processing-text\">{{ $t('AUTHORIZING_ANOTHER_DEVICE') }}</p>\n      </div>\n    </div>\n    <div v-else-if=\"isDeviceLinked && !hasUuid\">\n      <!-- Mode for linked devices WITHOUT UUID parameter -->\n      <div class=\"message-container\">\n        <h1 class=\"title\">{{ $t('NOTICE_SCAN_QR_CODE_THAT_IS_SHOWN_ON_COMPUTER') }}</h1>\n      </div>\n    </div>\n    <div v-else>\n      <!-- Mode for unlinked devices showing QR code -->\n      <h1 class=\"title\">{{ $t('SCAN_QR_TO_LINK_COMPUTER') }}</h1>\n      <div class=\"subtitle-wrapper\">\n        <html-with-links tag=\"p\" class=\"subtitle\" :html=\"$t('LINK_APPLE_SILICON_MAC_DESC', { href: '/appdb-tools' })\" />\n        <html-with-links tag=\"p\" class=\"subtitle tv-link\" :html=\"$t('CLICK_TO_LINK_TV', { href: '/link/tv' })\" />\n      </div>\n\n      <!-- Show loader while fetching new QR code -->\n      <div v-if=\"isLoading\" class=\"loader-container\">\n        <loader size=\"50px\" />\n        <p class=\"processing-text\">{{ $t('LOADING') }}</p>\n      </div>\n\n      <!-- Show QR code once loaded -->\n      <div v-else>\n        <div class=\"qr-container\">\n          <qrcode class=\"qr-code\" :value=\"qrCodeUrl\" :background=\"qrCodeBg\" />\n          <div class=\"timer\" v-if=\"expiresTime\">\n            {{ timeRemaining }}\n          </div>\n        </div>\n\n        <!-- Email-based linking option -->\n        <div class=\"email-linking\">\n          <p class=\"email-linking-text\">{{ $t('LINK_DEVICE_BACKUP_OPTION') }}</p>\n\n          <div class=\"form__group g-code\">\n            <input v-model=\"email\" placeholder=\"user@example.com\" type=\"email\" class=\"g-code__input\" />\n            <button type=\"button\" class=\"g-code__button\" :class=\"{ 'g-code__button_loading': isEmailLinking }\"\n              @click=\"linkViaEmail\">\n              <span class=\"g-code__loader\"></span>\n              {{ $t('LINK_DEVICE_BUTTON') }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Back link shown in all modes -->\n    <div class=\"back-link-container\">\n      <a href=\"javascript:history.back()\" class=\"g-button back-link\">{{ $t('GO_BACK') }}</a>\n    </div>\n  </section>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport QrcodeVue from 'qrcode.vue';\nimport Loader from '@/components/Loader';\nimport HtmlWithLinks from '@/components/HtmlWithLinks.vue';\n\nexport default {\n  components: { qrcode: QrcodeVue, Loader, HtmlWithLinks },\n  data() {\n    return {\n      uuid: '',\n      expiresTime: null,\n      linkToken: null,\n      isLoading: true,\n      pollingInterval: null,\n      checkSessionInterval: null,\n      lastUpdated: Date.now(),\n      email: '',\n      isEmailLinking: false,\n    };\n  },\n  computed: {\n    ...mapState(['theme']),\n    qrCodeBg() {\n      // Always return white for QR code background regardless of theme\n      return '#FFFFFF';\n    },\n    isDeviceLinked() {\n      return this.$store.getters.isDeviceLinked;\n    },\n    hasUuid() {\n      return !!this.$route.query.uuid;\n    },\n    domain() {\n      return window.location.host;\n    },\n    qrCodeUrl() {\n      if (!this.uuid) return '';\n      return `https://${this.domain}/link-qr/?uuid=${this.uuid}`;\n    },\n    timeRemaining() {\n      if (!this.expiresTime) return '';\n\n      const timestamp = this.lastUpdated;\n      const now = Math.floor(Date.now() / 1000);\n      const remaining = Math.max(0, this.expiresTime - now);\n\n      return `${remaining} ${this.$t('SECONDS_REMAINING')}`;\n    }\n  },\n  methods: {\n    async getLinkSession() {\n      try {\n        // Clean up any existing intervals/timeouts first\n        this.cleanupIntervals();\n\n        // Set loading state\n        this.isLoading = true;\n\n        // Clear previous state\n        this.uuid = '';\n        this.expiresTime = null;\n        this.linkToken = null;\n\n        // Get new session\n        const response = await this.$api.call('get_link_session', {}, false);\n\n        if (response.success && response.data) {\n          this.uuid = response.data.uuid || '';\n          this.expiresTime = response.data.expires_at || null;\n          this.linkToken = response.data.link_token || null;\n\n          // Start checking for session updates\n          this.startCheckingSession();\n\n          // End loading state\n          this.isLoading = false;\n        } else {\n          console.error('Failed to get link session:', response);\n          setTimeout(() => this.getLinkSession(), 2000);\n        }\n      } catch (error) {\n        console.error('Error getting link session:', error);\n        setTimeout(() => this.getLinkSession(), 2000);\n      }\n    },\n\n    startCheckingSession() {\n      if (this.checkSessionInterval) {\n        clearInterval(this.checkSessionInterval);\n        this.checkSessionInterval = null;\n      }\n\n      // Instead of interval, use recursive setTimeout pattern\n      this.checkSession();\n    },\n\n    async checkSession() {\n      if (!this.uuid) return;\n\n      try {\n        const response = await this.$api.call('get_link_session', { uuid: this.uuid }, false);\n\n        if (response.success && response.data) {\n          // Update expires_at from response to recalculate remaining time\n          if (response.data.expires_at) {\n            this.expiresTime = response.data.expires_at;\n            this.lastUpdated = Date.now();\n          }\n\n          // Check if we got a link token\n          if (response.data.link_token) {\n            // We have a link token, set it and redirect\n            localStorage.setItem('lt', response.data.link_token);\n            this.$store.commit('lt', response.data.link_token);\n\n            // Fetch all necessary data before redirecting\n            await Promise.all([\n              this.$store.dispatch('getConfig'),\n              this.$store.dispatch('getDevices'),\n              this.$store.dispatch('getCustomerProfile')\n            ]);\n\n            // Now redirect to success page\n            this.$router.push('/success?title=PC_LINK_OK');\n\n            // No need to continue checking\n            return;\n          }\n        } else if (response.errors && response.errors[0] && response.errors[0].code === 'ERROR_LINK_SESSION_EXPIRED') {\n          // Session expired - CLEAN UP ALL INTERVALS before getting a new session\n          this.cleanupIntervals();\n          // Get a new session\n          this.getLinkSession();\n          return;\n        }\n      } catch (error) {\n        console.error('Error checking link session:', error);\n      }\n\n      // Force update of timer display even if expires_at didn't change\n      this.lastUpdated = Date.now();\n\n      // Store timeout ID for cleanup\n      this.checkSessionInterval = setTimeout(() => {\n        this.checkSession();\n      }, 1000);\n    },\n\n    async processLinkFromDevice() {\n      try {\n        if (!this.$store.getters.lt || !this.$route.query.uuid) {\n          // Should not happen, redirect to home\n          this.$router.push('/');\n          return;\n        }\n\n        const response = await this.$api.call('get_link_session', {\n          uuid: this.$route.query.uuid,\n          set_link_token: this.$store.getters.lt\n        }, false);\n\n        if (response.success) {\n          // Fetch all necessary data before redirecting\n          await Promise.all([\n            this.$store.dispatch('getConfig'),\n            this.$store.dispatch('getDevices'),\n            this.$store.dispatch('getCustomerProfile')\n          ]);\n\n          // Successfully linked, redirect to success page\n          this.$router.push('/success?title=LINK_AUTHORIZED');\n        } else {\n          // Error linking, redirect to home\n          this.$router.push('/');\n        }\n      } catch (error) {\n        console.error('Error processing link from device:', error);\n        this.$router.push('/');\n      }\n    },\n\n    // Helper method to clean up all intervals and timeouts\n    cleanupIntervals() {\n      if (this.checkSessionInterval) {\n        clearTimeout(this.checkSessionInterval);\n        this.checkSessionInterval = null;\n      }\n\n      if (this.pollingInterval) {\n        clearTimeout(this.pollingInterval);\n        this.pollingInterval = null;\n      }\n    },\n\n    async linkViaEmail() {\n      if (!/^\\S+@\\S+\\.\\S+$/.test(this.email)) {\n        this.$notify({\n          type: 'error',\n          text: this.$t('INVALID_EMAIL'),\n        });\n        return;\n      }\n\n      this.isEmailLinking = true;\n\n      this.$api.link({\n        email: this.email,\n        type: 'control',\n      })\n        .then((response) => {\n          if (response.errors.length && response.errors[0].code === 'ERROR_PROCEED_TO_EMAIL') {\n            this.$router.push({\n              name: 'success',\n              params: {\n                message: response.errors[0].translated,\n                link: '/',\n                linkText: this.$t('GO_TO_MAIN_PAGE'),\n              },\n            });\n            return;\n          }\n\n          if (response.success) {\n            this.$router.push({\n              name: 'success',\n              params: {\n                message: this.$t('YOUR_DEVICE_BEING_LINKED'),\n                link: '/',\n                linkText: this.$t('GO_TO_MAIN_PAGE'),\n              },\n            });\n            if (response.data.link_token) {\n              this.$store.commit('lt', response.data.link_token);\n            }\n            if (response.data.profile_service) {\n              this.checkDevicesAfterLink();\n              window.setTimeout(() => {\n                window.location.href = response.data.profile_service;\n              }, 1000);\n            }\n          } else {\n            this.$router.push({\n              name: 'error',\n              params: {\n                message: response.errors[0].translated,\n              },\n            });\n          }\n        })\n        .finally(() => {\n          this.isEmailLinking = false;\n        });\n    },\n\n    checkDevicesAfterLink() {\n      setTimeout(async () => {\n        await Promise.allSettled([this.$store.dispatch('getDevices', false), this.$store.dispatch('getConfig', false)]);\n\n        const { devices } = this.$store.getters;\n        if (devices.length > 0) {\n          this.$router.push('/');\n          return;\n        }\n\n        this.checkDevicesAfterLink();\n      }, 1000);\n    },\n  },\n  created() {\n    // Always reset the loading state when component is created\n    this.isLoading = true;\n\n    if (this.isDeviceLinked && this.hasUuid) {\n      // Mode for linked devices with UUID parameter\n      this.processLinkFromDevice();\n    } else if (!this.isDeviceLinked) {\n      // Mode for unlinked devices showing QR code\n      this.getLinkSession();\n    }\n    // Third mode (isDeviceLinked && !hasUuid) just shows the message, no action needed\n  },\n  beforeDestroy() {\n    // Clean up intervals/timeouts\n    this.cleanupIntervals();\n  },\n  // Handle page navigation with keep-alive\n  activated() {\n    // If we're in the QR code mode and not linked, refresh the QR code\n    if (!this.isDeviceLinked && !this.hasUuid) {\n      this.getLinkSession();\n    }\n  },\n  // Ensure cleanup when navigating away\n  deactivated() {\n    // Clean up all intervals and timeouts when navigating away\n    this.cleanupIntervals();\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/variables\";\n\n.main {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 30px;\n  min-height: 300px;\n}\n\n.title {\n  font-size: 22px;\n  margin-bottom: 30px;\n  text-align: center;\n  max-width: 600px;\n}\n\n.qr-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.qr-code {\n  width: 250px;\n  height: 250px;\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  // Ensure QR code SVG/Canvas fills container\n  :deep(svg),\n  :deep(canvas) {\n    width: 100% !important;\n    height: 100% !important;\n    display: block;\n  }\n}\n\n.timer {\n  font-size: 18px;\n  margin-top: 10px;\n  color: var(--text-secondary);\n}\n\n.loader-container,\n.message-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 50px;\n}\n\n.processing-text {\n  margin-top: 20px;\n  font-size: 18px;\n}\n\n.back-link-container {\n  margin-top: 30px;\n  text-align: center;\n}\n\n.back-link {\n  font-weight: 400;\n  line-height: normal;\n  font-family: inherit;\n}\n\n.subtitle-wrapper {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: -20px;\n  margin-bottom: 30px;\n}\n\n.subtitle {\n  font-size: 14px;\n  color: var(--text-secondary);\n  text-align: center;\n  max-width: 500px;\n  margin: 0 auto;\n\n  :deep(a) {\n    color: var(--primary);\n  }\n}\n\n.tv-link {\n  margin-top: 8px;\n}\n\n.email-linking {\n  margin-top: 30px;\n  width: 100%;\n  max-width: 400px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.email-linking-text {\n  font-size: 14px;\n  color: var(--text-secondary);\n  margin-bottom: 15px;\n  text-align: center;\n}\n\n.form__group {\n  display: flex;\n  width: 100%;\n  position: relative;\n  margin-bottom: 10px;\n}\n\n.g-code {\n  &__input {\n    background-color: var(--tertiary-bg);\n    border: 1px solid var(--tertiary-accent);\n    border-radius: 5px 0 0 5px;\n    padding: 10px 10px;\n    font-size: 14px;\n    width: 100%;\n    color: var(--text-primary);\n    height: 40px;\n    outline: none;\n\n    &:focus {\n      border-color: var(--primary);\n    }\n  }\n\n  &__button {\n    background-color: var(--primary);\n    color: #fff;\n    border: none;\n    border-radius: 0 5px 5px 0;\n    padding: 0 15px;\n    font-size: 14px;\n    cursor: pointer;\n    white-space: nowrap;\n    height: 40px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: background-color 0.2s ease;\n\n    &_loading {\n      position: relative;\n      pointer-events: none;\n\n      .g-code__loader {\n        display: inline-block;\n      }\n    }\n  }\n\n  &__loader {\n    display: none;\n    width: 16px;\n    height: 16px;\n    border: 2px solid rgba(255, 255, 255, 0.3);\n    border-radius: 50%;\n    border-top-color: #fff;\n    animation: spin 1s linear infinite;\n    margin-right: 5px;\n  }\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkQR.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LinkQR.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./LinkQR.vue?vue&type=template&id=b8bef0d4&scoped=true\"\nimport script from \"./LinkQR.vue?vue&type=script&lang=js\"\nexport * from \"./LinkQR.vue?vue&type=script&lang=js\"\nimport style0 from \"./LinkQR.vue?vue&type=style&index=0&id=b8bef0d4&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b8bef0d4\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}