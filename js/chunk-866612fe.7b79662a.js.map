{"version":3,"sources":["webpack:///./src/views/Repos/Import.vue?2d96","webpack:///./src/views/Repos/Import.vue","webpack:///src/views/Repos/Import.vue","webpack:///./src/views/Repos/Import.vue?9334","webpack:///./src/views/Repos/Import.vue?c655"],"names":["render","_vm","this","_c","_self","staticClass","_v","_s","$t","staticRenderFns","components","Loader","computed","_objectSpread","title","mapState","mapGetters","url","decodeURIComponent","$route","query","isDeviceNotLinked","configLoaded","isDeviceLinked","watch","immediate","handler","newValue","$router","replace","name","params","message","link","linkText","methods","validateURL","URL","_unused","import","_this","$api","addRepo","then","response","success","concat","data","id","catch","errors","translated","created","component"],"mappings":"yIAAA,W,yCCAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,IAAI,CAACE,YAAY,QAAQ,CAACJ,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,GAAG,4BAA4BL,EAAG,WAAW,IAErKM,EAAkB,G,owCCSP,OACfC,WAAA,CACAC,eAEAC,SAAAC,MAAA,CACAC,MAAA,WACA,YAAAN,GAAA,0BAEAO,eAAA,mBACAC,eAAA,yBACAC,IAAA,WACA,OAAAC,mBAAA,KAAAC,OAAAC,MAAAH,MAEAI,kBAAA,WACA,YAAAC,eAAA,KAAAC,kBAGAC,MAAA,CACAH,kBAAA,CACAI,WAAA,EACAC,QAAA,SAAAC,GACAA,GAIA,KAAAC,QAAAC,QAAA,CACAC,KAAA,QACAC,OAAA,CACAC,QAAA,mBACAC,KAAA,QACAC,SAAA,KAAA1B,GAAA,yBAMA2B,QAAA,CACAC,YAAA,WACA,IAGA,OADA,IAAAC,IAAA,KAAApB,MACA,EACA,MAAAqB,GASA,OARA,KAAAV,QAAAC,QAAA,CACAC,KAAA,QACAC,OAAA,CACAC,QAAA,oBACAC,KAAA,YACAC,SAAA,sBAGA,IAGAK,OAAA,eAAAC,EAAA,KACA,KAAAC,KAAAC,QAAA,KAAAzB,KACA0B,MAAA,SAAAC,GACA,IAAAA,EAAAC,QACA,MAAAD,EAGAJ,EAAAZ,QAAAC,QAAA,UAAAiB,OAAAF,EAAAG,KAAAC,QAEAC,OAAA,SAAAL,GACAJ,EAAAZ,QAAAC,QAAA,CACAC,KAAA,QACAC,OAAA,CACAC,QAAAY,EAAAM,OAAA,GAAAC,WACAlB,KAAA,YACAC,SAAA,0BAMAkB,QAAA,WACA,KAAAhB,eACA,KAAAG,WCxF8V,I,wBCQ1Vc,EAAY,eACd,EACArD,EACAS,GACA,EACA,KACA,WACA,MAIa,aAAA4C,E","file":"js/chunk-866612fe.7b79662a.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Import.vue?vue&type=style&index=0&id=b44830f0&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('p',{staticClass:\"text\"},[_vm._v(_vm._s(_vm.$t('IMPORTING_REPOSITORY')))]),_c('loader')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <p class=\"text\">{{ $t('IMPORTING_REPOSITORY') }}</p>\r\n    <loader></loader>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState } from 'vuex';\r\nimport Loader from '@/components/Loader.vue';\r\n\r\nexport default {\r\n  components: {\r\n    Loader,\r\n  },\r\n  computed: {\r\n    title() {\r\n      return this.$t('IMPORTING_REPOSITORY');\r\n    },\r\n    ...mapState(['configLoaded']),\r\n    ...mapGetters(['isDeviceLinked']),\r\n    url() {\r\n      return decodeURIComponent(this.$route.query.url);\r\n    },\r\n    isDeviceNotLinked() {\r\n      return this.configLoaded && !this.isDeviceLinked;\r\n    },\r\n  },\r\n  watch: {\r\n    isDeviceNotLinked: {\r\n      immediate: true,\r\n      handler(newValue) {\r\n        if (!newValue) {\r\n          return;\r\n        }\r\n\r\n        this.$router.replace({\r\n          name: 'error',\r\n          params: {\r\n            message: 'NO_DEVICE_LINKED',\r\n            link: '/link',\r\n            linkText: this.$t('GO_TO_LINK_PAGE'),\r\n          },\r\n        });\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    validateURL() {\r\n      try {\r\n        // eslint-disable-next-line no-new\r\n        new URL(this.url);\r\n        return true;\r\n      } catch {\r\n        this.$router.replace({\r\n          name: 'error',\r\n          params: {\r\n            message: 'PROVIDE_VALID_URL',\r\n            link: '/my/repos',\r\n            linkText: 'MY_REPOSITORIES',\r\n          },\r\n        });\r\n        return false;\r\n      }\r\n    },\r\n    import() {\r\n      this.$api.addRepo(this.url)\r\n        .then((response) => {\r\n          if (!response.success) {\r\n            throw response;\r\n          }\r\n\r\n          this.$router.replace(`/repos/${response.data.id}`);\r\n        })\r\n        .catch((response) => {\r\n          this.$router.replace({\r\n            name: 'error',\r\n            params: {\r\n              message: response.errors[0].translated,\r\n              link: '/my/repos',\r\n              linkText: 'MY_REPOSITORIES',\r\n            },\r\n          });\r\n        });\r\n    },\r\n  },\r\n  created() {\r\n    if (this.validateURL()) {\r\n      this.import();\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.text {\r\n  text-align: center;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-bottom: 20px;\r\n  padding: 0 15px;\r\n  line-height: 24px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Import.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Import.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Import.vue?vue&type=template&id=b44830f0&scoped=true\"\nimport script from \"./Import.vue?vue&type=script&lang=js\"\nexport * from \"./Import.vue?vue&type=script&lang=js\"\nimport style0 from \"./Import.vue?vue&type=style&index=0&id=b44830f0&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b44830f0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}