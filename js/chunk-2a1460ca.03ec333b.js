(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a1460ca"],{1394:function(e,t,r){},"15ea":function(e,t,r){},1658:function(e,t,r){},"230c":function(e,t,r){},"240b":function(e,t,r){"use strict";r("d491")},2621:function(e,t,r){e.exports=r.p+"img/support.f4789621.svg"},"2b55":function(e,t,r){"use strict";r("1394")},"32f42":function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t(e.component,{tag:"component",staticClass:"link",attrs:{to:e.to},on:{click:e.onClick}},[t("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"11",height:"20"}},[t("path",{attrs:{fill:"currentColor",d:"M.38 19.01c.49.49 1.28.49 1.77 0l8.31-8.31a.996.996\n      0 0 0 0-1.41L2.15.98a1.25 1.25 0 0 0-1.77 0 1.25 1.25 0 0 0\n      0 1.77L7.62 10 .37 17.25c-.48.48-.48 1.28.01 1.76Z"}})]),e._t("default")],2)},o=[],a={props:{to:[String,Object],fallback:{type:[String,Object],default:"/"},programmatic:Boolean,routes:Array},computed:{component:function(){return this.to&&!this.programmatic?"router-link":"button"}},methods:{onClick:function(e){var t=this;this.programmatic&&(e.preventDefault(),this.routes?this.$store.dispatch("router/back",{routes:this.routes,fallback:this.fallback}):(this.$store.commit("router/setIsBackNavigation",!0),this.$router.back(),setTimeout((function(){t.$store.commit("router/setIsBackNavigation",!1)}),100)))}}},i=a,s=(r("2b55"),r("2877")),u=Object(s["a"])(i,n,o,!1,null,"7a501b72",null);t["a"]=u.exports},"3b9d":function(e,t,r){},"639a":function(e,t,r){"use strict";r("230c")},7737:function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t("label",{staticClass:"checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.modelValue,expression:"modelValue"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.modelValue)?e._i(e.modelValue,null)>-1:e.modelValue},on:{change:function(t){var r=e.modelValue,n=t.target,o=!!n.checked;if(Array.isArray(r)){var a=null,i=e._i(r,a);n.checked?i<0&&(e.modelValue=r.concat([a])):i>-1&&(e.modelValue=r.slice(0,i).concat(r.slice(i+1)))}else e.modelValue=o}}}),t("span",{staticClass:"box"}),e._t("default")],2)},o=[],a={props:["value"],computed:{modelValue:{set:function(e){this.$emit("input",e)},get:function(){return this.value}}}},i=a,s=(r("d9c6"),r("2877")),u=Object(s["a"])(i,n,o,!1,null,"019ac39f",null);t["a"]=u.exports},9890:function(e,t,r){"use strict";r("15ea")},c335:function(e,t,r){},d163:function(e,t,r){e.exports=r.p+"img/attachment.fba16150.svg"},d491:function(e,t,r){},d58d:function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"discussion"},[e.isPurchaseDiscussion?t("div",{staticClass:"discussion__warning"},[e._v("\n        "+e._s(e.$t("P2P_CHAT_COMMUNICATION_NOTICE"))+"\n    ")]):e._e(),e.canComment?t("div",{staticClass:"discussion__comment-buttons"},[e.needsNameInput?[t("div",{staticClass:"discussion__name-form"},[t("h3",[e._v(e._s(e.$t("ENTER_NAME_TO_COMMENT")))]),t("div",{staticClass:"discussion__name-input"},[t("VInput",{attrs:{placeholder:e.$t("NAME_PLACEHOLDER")},model:{value:e.customerName,callback:function(t){e.customerName=t},expression:"customerName"}}),t("Button",{attrs:{disabled:!e.customerName},on:{click:e.saveName}},[e._v(e._s(e.$t("SAVE")))])],1)])]:[e.canCommentAsUser&&e.canCommentAsStaff?[t("Button",{staticClass:"discussion__comment-button",attrs:{disabled:e.isPostingLocked},on:{click:e.openUserComposer}},[e._v("\n                    "+e._s(e.$t("POST_MESSAGE"))+"\n                ")]),t("Button",{staticClass:"discussion__comment-button",attrs:{type:"primary",disabled:e.isPostingLocked},on:{click:e.openStaffComposer}},[e._v("\n                    "+e._s(e.$t("COMMENT_AS_DEVELOPER_STAFF"))+"\n                ")])]:e.canCommentAsUser?[t("Button",{staticClass:"discussion__comment-button",attrs:{disabled:e.isPostingLocked},on:{click:e.openUserComposer}},[e._v("\n                    "+e._s(e.$t("POST_MESSAGE"))+"\n                ")])]:e.canCommentAsStaff?[t("Button",{staticClass:"discussion__comment-button",attrs:{type:"primary",disabled:e.isPostingLocked},on:{click:e.openStaffComposer}},[e._v("\n                    "+e._s(e.$t("COMMENT_AS_DEVELOPER_STAFF"))+"\n                ")])]:e._e()]],2):e._e(),e.messagesLoaded?0===e.messages.length?t("div",{staticClass:"discussion__empty"},[e._v("\n        "+e._s(e.$t("NO_MESSAGES_YET"))+"\n    ")]):t("div",[t("div",{staticClass:"discussion__messages"},[t("transition-group",{attrs:{name:"message",tag:"div"}},e._l(e.topLevelMessages,(function(r){return t("div",{key:r.id,staticClass:"discussion__message-wrapper",class:{"discussion__message-wrapper--new":r.isNew}},[t("DiscussionMessage",{attrs:{message:r,replies:e.getRepliesForMessage(r.id),topic:e.topic,"nesting-level":0,canCommentAsUser:e.canCommentAsUser,canCommentAsStaff:e.canCommentAsStaff},on:{reply:e.handleReply,report:e.handleReportMessage,"load-more-replies":e.handleLoadMoreReplies}})],1)})),0)],1)]):t("div",{staticClass:"discussion__loading"},[t("Loader")],1),!e.canComment&&e.disabledReason?t("div",{staticClass:"discussion__disabled"},[e._v("\n        "+e._s(e.disabledReason)+"\n    ")]):e._e(),t("ReportModal",{ref:"reportModal",on:{"submit-report":e.submitReport}}),t("MessageComposerModal",{ref:"messageComposer",attrs:{topic:e.topic,isPrivate:e.isPrivate,forceType:e.forceType,isPostingLocked:e.isPostingLocked},on:{"submit-message":e.handleMessageSubmit}}),t("VModal",{attrs:{name:"reply-type-selector",width:320,height:"auto","close-button":!0,scrollable:""}},[t("div",{staticClass:"reply-type-selector"},[t("h3",{staticClass:"reply-type-selector__title"},[e._v(e._s(e.$t("REPLY_AS")))]),t("p",{staticClass:"reply-type-selector__text"},[e._v(e._s(e.$t("HOW_WOULD_YOU_LIKE_TO_REPLY")))]),t("div",{staticClass:"reply-type-selector__buttons"},[t("Button",{staticClass:"reply-type-selector__button",attrs:{type:"secondary"},on:{click:e.handleCancelReplyTypeSelection}},[e._v("\n                    "+e._s(e.$t("CANCEL"))+"\n                ")]),t("Button",{staticClass:"reply-type-selector__button",on:{click:e.handleReplyAsUser}},[e._v("\n                    "+e._s(e.$t("REPLY_AS_USER"))+"\n                ")]),t("Button",{staticClass:"reply-type-selector__button",attrs:{type:"primary"},on:{click:e.handleReplyAsStaff}},[e._v("\n                    "+e._s(e.$t("REPLY_AS_DEVELOPER_STAFF"))+"\n                ")])],1)])])],1)},o=[],a=r("a026"),i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"message"},[t("div",{staticClass:"message__header"},[t("div",{staticClass:"message__author"},[t("div",{staticClass:"message__name"},[e._v(e._s(e.message.name))]),e.message.notice?t("div",{staticClass:"message__notice"},[e._v(e._s(e.message.notice))]):e._e(),e.message.is_private?t("div",{staticClass:"message__badge message__badge--private"},[e._v(e._s(e.$t("PRIVATE")))]):e._e()]),t("div",{staticClass:"message__meta"},[t("div",{staticClass:"message__date"},[e._v(e._s(e.formatDate(e.message.added_at)))])])]),t("div",{staticClass:"message__content"},[t("VMarkdown",{attrs:{content:e.message.message}})],1),e.canInteract?t("div",{staticClass:"message__actions"},[t("div",{staticClass:"message__action",on:{click:e.handleReply}},[e._v(e._s(e.$t("REPLY")))]),t("div",{staticClass:"message__action",on:{click:e.handleReport}},[e._v(e._s(e.$t("REPORT")))]),e.showSetAsReadButton?t("div",{staticClass:"message__action message__action--read",class:{"message__action--loading":e.isSettingAsRead},on:{click:e.setMessageRead}},[e._v("\n            "+e._s(e.isSettingAsRead?e.$t("SETTING"):e.$t("SET_AS_READ"))+"\n        ")]):e._e()]):e._e(),e.hasReplies?t("div",{staticClass:"message__replies"},[!e.showReplies&&e.replies.length>0?t("div",{staticClass:"message__show-replies"},[t("button",{staticClass:"message__show-replies-btn",on:{click:e.toggleReplies}},[e._v("\n                "+e._s(e.$t("SHOW_REPLIES",{count:e.replies.length,reply:1===e.replies.length?e.$t("REPLY"):e.$t("REPLIES")}))+"\n            ")])]):e._e(),t("transition",{attrs:{name:"replies-container"}},[e.showReplies?t("div",{staticClass:"message__replies-container"},[t("transition-group",{staticClass:"message__replies-list",attrs:{name:"reply",tag:"div"}},e._l(e.visibleReplies,(function(r,n){return t("div",{key:r.id,staticClass:"message__reply",style:{animationDelay:50*n+"ms"}},[t("DiscussionMessage",{attrs:{message:r,replies:e.getNestedReplies(r.id),topic:e.topic,"nesting-level":e.nestingLevel+1,canCommentAsUser:e.canCommentAsUser,canCommentAsStaff:e.canCommentAsStaff},on:{reply:e.emitReply,report:e.emitReport,"load-more-replies":e.handleLoadMoreReplies}})],1)})),0),e.hasMoreReplies?t("div",{staticClass:"message__load-more"},[t("button",{staticClass:"message__load-more-btn",on:{click:e.loadMoreReplies}},[e._v("\n                        "+e._s(e.$t("LOAD_MORE_REPLIES"))+"\n                    ")])]):e._e()],1):e._e()])],1):e._e()])},s=[],u={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},c=function(e,t,r){var n,o=u[e];return n="string"===typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!==r&&void 0!==r&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function l(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var d={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},f={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},m={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},p={date:l({formats:d,defaultWidth:"full"}),time:l({formats:f,defaultWidth:"full"}),dateTime:l({formats:m,defaultWidth:"full"})},h={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},g=function(e,t,r,n){return h[e]};function v(e){return function(t,r){var n,o=null!==r&&void 0!==r&&r.context?String(r.context):"standalone";if("formatting"===o&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,i=null!==r&&void 0!==r&&r.width?String(r.width):a;n=e.formattingValues[i]||e.formattingValues[a]}else{var s=e.defaultWidth,u=null!==r&&void 0!==r&&r.width?String(r.width):e.defaultWidth;n=e.values[u]||e.values[s]}var c=e.argumentCallback?e.argumentCallback(t):t;return n[c]}}var y={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},b={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},w={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},S={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},P={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},x=function(e,t){var r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},E={ordinalNumber:x,era:v({values:y,defaultWidth:"wide"}),quarter:v({values:b,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:v({values:w,defaultWidth:"wide"}),day:v({values:_,defaultWidth:"wide"}),dayPeriod:v({values:S,defaultWidth:"wide",formattingValues:P,defaultFormattingWidth:"wide"})};function C(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(o);if(!a)return null;var i,s=a[0],u=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(u)?k(u,(function(e){return e.test(s)})):M(u,(function(e){return e.test(s)}));i=e.valueCallback?e.valueCallback(c):c,i=r.valueCallback?r.valueCallback(i):i;var l=t.slice(s.length);return{value:i,rest:l}}}function M(e,t){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function k(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function O(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var o=n[0],a=t.match(e.parsePattern);if(!a)return null;var i=e.valueCallback?e.valueCallback(a[0]):a[0];i=r.valueCallback?r.valueCallback(i):i;var s=t.slice(o.length);return{value:i,rest:s}}}var T=/^(\d+)(th|st|nd|rd)?/i,L=/\d+/i,$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},A={any:[/^b/i,/^(a|c)/i]},R={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},D={any:[/1/i,/2/i,/3/i,/4/i]},N={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},j={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},F={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},I={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},U={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},W={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Y={ordinalNumber:O({matchPattern:T,parsePattern:L,valueCallback:function(e){return parseInt(e,10)}}),era:C({matchPatterns:$,defaultMatchWidth:"wide",parsePatterns:A,defaultParseWidth:"any"}),quarter:C({matchPatterns:R,defaultMatchWidth:"wide",parsePatterns:D,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:C({matchPatterns:N,defaultMatchWidth:"wide",parsePatterns:j,defaultParseWidth:"any"}),day:C({matchPatterns:F,defaultMatchWidth:"wide",parsePatterns:I,defaultParseWidth:"any"}),dayPeriod:C({matchPatterns:U,defaultMatchWidth:"any",parsePatterns:W,defaultParseWidth:"any"})},G={code:"en-US",formatDistance:c,formatLong:p,formatRelative:g,localize:E,match:Y,options:{weekStartsOn:0,firstWeekContainsDate:1}},B={};function H(){return B}Math.pow(10,8);var V=6048e5,q=864e5,z=Symbol.for("constructDateFrom");function X(e){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(e)}function Q(e,t){return"function"===typeof e?e(t):e&&"object"===X(e)&&z in e?e[z](t):e instanceof Date?new e.constructor(t):new Date(t)}function J(e,t){return Q(t||e,e)}function K(e){var t=J(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function ee(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=Q.bind(null,e||r.find((function(e){return"object"===Z(e)})));return r.map(o)}function te(e,t){var r=J(e,null===t||void 0===t?void 0:t.in);return r.setHours(0,0,0,0),r}function re(e,t){return se(e)||ie(e,t)||oe(e,t)||ne()}function ne(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oe(e,t){if(e){if("string"===typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ie(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}function se(e){if(Array.isArray(e))return e}function ue(e,t,r){var n=ee(null===r||void 0===r?void 0:r.in,e,t),o=re(n,2),a=o[0],i=o[1],s=te(a),u=te(i),c=+s-K(s),l=+u-K(u);return Math.round((c-l)/q)}function ce(e,t){var r=J(e,null===t||void 0===t?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function le(e,t){var r=J(e,null===t||void 0===t?void 0:t.in),n=ue(r,ce(r)),o=n+1;return o}function de(e,t){var r,n,o,a,i,s,u=H(),c=null!==(r=null!==(n=null!==(o=null!==(a=null===t||void 0===t?void 0:t.weekStartsOn)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==o?o:u.weekStartsOn)&&void 0!==n?n:null===(s=u.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==r?r:0,l=J(e,null===t||void 0===t?void 0:t.in),d=l.getDay(),f=(d<c?7:0)+d-c;return l.setDate(l.getDate()-f),l.setHours(0,0,0,0),l}function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){he(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function he(e,t,r){return t=ge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ge(e){var t=ve(e,"string");return"symbol"===fe(t)?t:String(t)}function ve(e,t){if("object"!==fe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function ye(e,t){return de(e,pe(pe({},t),{},{weekStartsOn:1}))}function be(e,t){var r=J(e,null===t||void 0===t?void 0:t.in),n=r.getFullYear(),o=Q(r,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);var a=ye(o),i=Q(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);var s=ye(i);return r.getTime()>=a.getTime()?n+1:r.getTime()>=s.getTime()?n:n-1}function we(e,t){var r=be(e,t),n=Q((null===t||void 0===t?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),ye(n)}function _e(e,t){var r=J(e,null===t||void 0===t?void 0:t.in),n=+ye(r)-+we(r);return Math.round(n/V)+1}function Se(e,t){var r,n,o,a,i,s,u=J(e,null===t||void 0===t?void 0:t.in),c=u.getFullYear(),l=H(),d=null!==(r=null!==(n=null!==(o=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==o?o:l.firstWeekContainsDate)&&void 0!==n?n:null===(s=l.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:1,f=Q((null===t||void 0===t?void 0:t.in)||e,0);f.setFullYear(c+1,0,d),f.setHours(0,0,0,0);var m=de(f,t),p=Q((null===t||void 0===t?void 0:t.in)||e,0);p.setFullYear(c,0,d),p.setHours(0,0,0,0);var h=de(p,t);return+u>=+m?c+1:+u>=+h?c:c-1}function Pe(e,t){var r,n,o,a,i,s,u=H(),c=null!==(r=null!==(n=null!==(o=null!==(a=null===t||void 0===t?void 0:t.firstWeekContainsDate)&&void 0!==a?a:null===t||void 0===t||null===(i=t.locale)||void 0===i||null===(i=i.options)||void 0===i?void 0:i.firstWeekContainsDate)&&void 0!==o?o:u.firstWeekContainsDate)&&void 0!==n?n:null===(s=u.locale)||void 0===s||null===(s=s.options)||void 0===s?void 0:s.firstWeekContainsDate)&&void 0!==r?r:1,l=Se(e,t),d=Q((null===t||void 0===t?void 0:t.in)||e,0);d.setFullYear(l,0,c),d.setHours(0,0,0,0);var f=de(d,t);return f}function xe(e,t){var r=J(e,null===t||void 0===t?void 0:t.in),n=+de(r,t)-+Pe(r,t);return Math.round(n/V)+1}function Ee(e,t){var r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}var Ce={y:function(e,t){var r=e.getFullYear(),n=r>0?r:1-r;return Ee("yy"===t?n%100:n,t.length)},M:function(e,t){var r=e.getMonth();return"M"===t?String(r+1):Ee(r+1,2)},d:function(e,t){return Ee(e.getDate(),t.length)},a:function(e,t){var r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return"am"===r?"a.m.":"p.m."}},h:function(e,t){return Ee(e.getHours()%12||12,t.length)},H:function(e,t){return Ee(e.getHours(),t.length)},m:function(e,t){return Ee(e.getMinutes(),t.length)},s:function(e,t){return Ee(e.getSeconds(),t.length)},S:function(e,t){var r=t.length,n=e.getMilliseconds(),o=Math.trunc(n*Math.pow(10,r-3));return Ee(o,t.length)}},Me={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ke={G:function(e,t,r){var n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){var n=e.getFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return Ce.y(e,t)},Y:function(e,t,r,n){var o=Se(e,n),a=o>0?o:1-o;if("YY"===t){var i=a%100;return Ee(i,2)}return"Yo"===t?r.ordinalNumber(a,{unit:"year"}):Ee(a,t.length)},R:function(e,t){var r=be(e);return Ee(r,t.length)},u:function(e,t){var r=e.getFullYear();return Ee(r,t.length)},Q:function(e,t,r){var n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Ee(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){var n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Ee(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){var n=e.getMonth();switch(t){case"M":case"MM":return Ce.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){var n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Ee(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){var o=xe(e,n);return"wo"===t?r.ordinalNumber(o,{unit:"week"}):Ee(o,t.length)},I:function(e,t,r){var n=_e(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):Ee(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):Ce.d(e,t)},D:function(e,t,r){var n=le(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):Ee(n,t.length)},E:function(e,t,r){var n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){var o=e.getDay(),a=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ee(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){var o=e.getDay(),a=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ee(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,r){var n=e.getDay(),o=0===n?7:n;switch(t){case"i":return String(o);case"ii":return Ee(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){var n=e.getHours(),o=n/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,r){var n,o=e.getHours();switch(n=12===o?Me.noon:0===o?Me.midnight:o/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){var n,o=e.getHours();switch(n=o>=17?Me.evening:o>=12?Me.afternoon:o>=4?Me.morning:Me.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){var n=e.getHours()%12;return 0===n&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Ce.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):Ce.H(e,t)},K:function(e,t,r){var n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):Ee(n,t.length)},k:function(e,t,r){var n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):Ee(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ce.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Ce.s(e,t)},S:function(e,t){return Ce.S(e,t)},X:function(e,t,r){var n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return Te(n);case"XXXX":case"XX":return Le(n);case"XXXXX":case"XXX":default:return Le(n,":")}},x:function(e,t,r){var n=e.getTimezoneOffset();switch(t){case"x":return Te(n);case"xxxx":case"xx":return Le(n);case"xxxxx":case"xxx":default:return Le(n,":")}},O:function(e,t,r){var n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Oe(n,":");case"OOOO":default:return"GMT"+Le(n,":")}},z:function(e,t,r){var n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Oe(n,":");case"zzzz":default:return"GMT"+Le(n,":")}},t:function(e,t,r){var n=Math.trunc(+e/1e3);return Ee(n,t.length)},T:function(e,t,r){return Ee(+e,t.length)}};function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e>0?"-":"+",n=Math.abs(e),o=Math.trunc(n/60),a=n%60;return 0===a?r+String(o):r+String(o)+t+Ee(a,2)}function Te(e,t){if(e%60===0){var r=e>0?"-":"+";return r+Ee(Math.abs(e)/60,2)}return Le(e,t)}function Le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e>0?"-":"+",n=Math.abs(e),o=Ee(Math.trunc(n/60),2),a=Ee(n%60,2);return r+o+t+a}var $e=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ae=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Re=function(e,t){var r,n=e.match(/(P+)(p+)?/)||[],o=n[1],a=n[2];if(!a)return $e(e,t);switch(o){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;case"PPPP":default:r=t.dateTime({width:"full"});break}return r.replace("{{date}}",$e(o,t)).replace("{{time}}",Ae(a,t))},De={p:Ae,P:Re},Ne=/^D+$/,je=/^Y+$/,Fe=["D","DD","YY","YYYY"];function Ie(e){return Ne.test(e)}function Ue(e){return je.test(e)}function We(e,t,r){var n=Ye(e,t,r);if(console.warn(n),Fe.includes(e))throw new RangeError(n)}function Ye(e,t,r){var n="Y"===e[0]?"years":"days of the month";return"Use `".concat(e.toLowerCase(),"` instead of `").concat(e,"` (in `").concat(t,"`) for formatting ").concat(n," to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Be(e){return e instanceof Date||"object"===Ge(e)&&"[object Date]"===Object.prototype.toString.call(e)}function He(e){return!(!Be(e)&&"number"!==typeof e||isNaN(+J(e)))}var Ve=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,qe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ze=/^'([^]*?)'?$/,Xe=/''/g,Qe=/[a-zA-Z]/;function Je(e,t,r){var n,o,a,i,s,u,c,l,d,f,m,p,h,g,v=H(),y=null!==(n=null!==(o=null===r||void 0===r?void 0:r.locale)&&void 0!==o?o:v.locale)&&void 0!==n?n:G,b=null!==(a=null!==(i=null!==(s=null!==(u=null===r||void 0===r?void 0:r.firstWeekContainsDate)&&void 0!==u?u:null===r||void 0===r||null===(c=r.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.firstWeekContainsDate)&&void 0!==s?s:v.firstWeekContainsDate)&&void 0!==i?i:null===(l=v.locale)||void 0===l||null===(l=l.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==a?a:1,w=null!==(d=null!==(f=null!==(m=null!==(p=null===r||void 0===r?void 0:r.weekStartsOn)&&void 0!==p?p:null===r||void 0===r||null===(h=r.locale)||void 0===h||null===(h=h.options)||void 0===h?void 0:h.weekStartsOn)&&void 0!==m?m:v.weekStartsOn)&&void 0!==f?f:null===(g=v.locale)||void 0===g||null===(g=g.options)||void 0===g?void 0:g.weekStartsOn)&&void 0!==d?d:0,_=J(e,null===r||void 0===r?void 0:r.in);if(!He(_))throw new RangeError("Invalid time value");var S=t.match(qe).map((function(e){var t=e[0];if("p"===t||"P"===t){var r=De[t];return r(e,y.formatLong)}return e})).join("").match(Ve).map((function(e){if("''"===e)return{isToken:!1,value:"'"};var t=e[0];if("'"===t)return{isToken:!1,value:Ke(e)};if(ke[t])return{isToken:!0,value:e};if(t.match(Qe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));y.localize.preprocessor&&(S=y.localize.preprocessor(_,S));var P={firstWeekContainsDate:b,weekStartsOn:w,locale:y};return S.map((function(n){if(!n.isToken)return n.value;var o=n.value;(null!==r&&void 0!==r&&r.useAdditionalWeekYearTokens||!Ue(o))&&(null!==r&&void 0!==r&&r.useAdditionalDayOfYearTokens||!Ie(o))||We(o,t,String(e));var a=ke[o[0]];return a(_,o,y.localize,P)})).join("")}function Ke(e){var t=e.match(ze);return t?t[1].replace(Xe,"'"):e}var Ze=r("e7a4"),et={name:"DiscussionMessage",components:{VMarkdown:Ze["a"]},props:{message:{type:Object,required:!0},replies:{type:Array,default:function(){return[]}},topic:{type:String,required:!0},nestingLevel:{type:Number,default:0},canCommentAsUser:{type:Boolean,default:!1},canCommentAsStaff:{type:Boolean,default:!1}},data:function(){return{showReplies:this.nestingLevel<2,visibleCount:5,loadedAllReplies:!1,messageMarkedAsRead:!1,isSettingAsRead:!1}},computed:{hasReplies:function(){return this.replies&&this.replies.length>0},visibleReplies:function(){return this.replies.slice(0,this.visibleCount)},hasMoreReplies:function(){return this.replies.length>this.visibleCount&&!this.loadedAllReplies},maxNestingLevel:function(){return 5},canHaveNestedReplies:function(){return this.nestingLevel<this.maxNestingLevel},canInteract:function(){var e,t;return this.canCommentAsUser&&!(null===(e=this.$store.state.customerProfile)||void 0===e||!e.email)||this.canCommentAsStaff&&!(null===(t=this.$store.state.publisherProfile)||void 0===t||!t.email)},showSetAsReadButton:function(){var e,t;if(0===this.message.is_private)return!1;if(this.messageMarkedAsRead)return!1;var r=!(null===(e=this.$store.state.customerProfile)||void 0===e||!e.email),n=!(null===(t=this.$store.state.publisherProfile)||void 0===t||!t.email);return!(!r||!(0===this.message.read_at_receiver&&0===this.message.is_yours||0===this.message.read_at_sender&&1===this.message.is_yours))||!(!n||0!==this.message.read_at_staff)}},mounted:function(){},methods:{getNestedReplies:function(e){if(!this.canHaveNestedReplies)return[];var t=this;while(t.$parent&&"Discussion"!==t.$parent.$options.name)t=t.$parent;return t.$parent&&"Discussion"===t.$parent.$options.name?t.$parent.getRepliesForMessage(e):[]},loadMoreReplies:function(){this.visibleCount+=5,this.visibleCount>=this.replies.length&&(this.loadedAllReplies=!0),this.$emit("load-more-replies",this.message.id)},handleLoadMoreReplies:function(e){this.$emit("load-more-replies",e)},formatDate:function(e){return e?Je(new Date(1e3*e),"MMM d, yyyy HH:mm"):""},handleReply:function(){this.$emit("reply",this.message)},handleReport:function(){this.$emit("report",this.message)},emitReply:function(e){this.$emit("reply",e)},emitReport:function(e){this.$emit("report",e)},toggleReplies:function(){this.showReplies=!this.showReplies},setMessageRead:function(){var e=this;if(!this.isSettingAsRead){this.isSettingAsRead=!0;var t=this;while(t.$parent&&"Discussion"!==t.$parent.$options.name)t=t.$parent;t.$parent&&"Discussion"===t.$parent.$options.name&&t.$parent.handleMessageRead(this.message.id).then((function(){e.messageMarkedAsRead=!0,e.$nextTick((function(){e.$forceUpdate()})),e.$notify({type:"success",text:e.$t("MESSAGE_MARKED_AS_READ")})})).catch((function(t){console.error("Failed to mark message as read:",t),e.$notify({type:"error",text:e.$t("FAILED_TO_MARK_MESSAGE_AS_READ")})})).finally((function(){e.isSettingAsRead=!1}))}}}},tt=et,rt=(r("240b"),r("2877")),nt=Object(rt["a"])(tt,i,s,!1,null,"a0de6d8e",null),ot=nt.exports,at=r("2a7d"),it=r("e05c"),st=r("6cdc"),ut=r("7737"),ct=r("555f"),lt=function(){var e=this,t=e._self._c;return t("VModal",{attrs:{name:"report-message",width:400,height:"auto","close-button":""},on:{closed:e.clearForm}},[t("div",{staticClass:"report-modal"},[t("h2",{staticClass:"report-modal__title"},[e._v("Report Message")]),t("div",{staticClass:"report-modal__form"},[t("label",{staticClass:"report-modal__label",attrs:{for:"report-reason"}},[e._v("Reason for reporting:")]),t("VTextarea",{staticClass:"report-modal__textarea",attrs:{id:"report-reason",placeholder:"Please describe why you're reporting this message...",rows:4},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}}),t("div",{staticClass:"report-modal__notice"},[e._v("\n                Your report will be reviewed by staff. Posting false reports may result in your account being\n                disabled.\n            ")])],1),t("div",{staticClass:"report-modal__footer"},[t("Button",{attrs:{type:"secondary"},on:{click:e.cancel}},[e._v("Cancel")]),t("Button",{attrs:{disabled:!e.reason.trim(),type:"primary"},on:{click:e.submitReport}},[e._v("Submit Report")])],1)])])},dt=[],ft=r("eacb"),mt={name:"ReportModal",components:{VModal:ft["a"],Button:at["a"],VTextarea:it["a"]},data:function(){return{reason:"",messageData:null}},methods:{clearForm:function(){this.reason="",this.messageData=null},cancel:function(){this.$modal.hide("report-message")},submitReport:function(){this.reason.trim()&&(this.$emit("submit-report",{reason:this.reason,messageData:this.messageData}),this.$modal.hide("report-message"))},setMessageData:function(e){this.messageData=e}}},pt=mt,ht=(r("e4f3"),Object(rt["a"])(pt,lt,dt,!1,null,"d52acc36",null)),gt=ht.exports,vt=function(){var e=this,t=e._self._c;return t("VModal",{attrs:{name:"compose-message",width:500,height:"auto",scrollable:"","close-button":""},on:{closed:e.clearForm}},[t("div",{staticClass:"composer-modal"},[t("h2",{staticClass:"composer-modal__title"},[e._v("\n            "+e._s(e.postingAsStaff?e.$t("POST_AS_DEVELOPER_STAFF"):e.$t("POST_COMMENT"))+"\n        ")]),e.replyingTo&&e.replyingTo.id?t("div",{staticClass:"composer-modal__replying-to"},[t("div",[e._v(e._s(e.$t("REPLYING_TO"))+": "),t("span",[e._v(e._s(e.replyingTo.name))])]),t("div",{staticClass:"composer-modal__replying-to-cancel",on:{click:e.cancelReply}},[e._v(e._s(e.$t("CANCEL")))])]):e._e(),t("div",{staticClass:"composer-modal__form"},[t("VTextarea",{ref:"messageTextarea",staticClass:"composer-modal__textarea",attrs:{placeholder:e.$t("WRITE_YOUR_COMMENT_HERE"),rows:"6"},nativeOn:{paste:function(t){return e.handlePaste.apply(null,arguments)}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),t("div",{staticClass:"composer-modal__form-notice"},[e.isCustomerMode?[e.isPrivate?[e._v("\n                        "+e._s(e.$t("PRIVATE_COMMENT_NOTICE"))+"\n                    ")]:[e._v("\n                        "+e._s(e.$t("PUBLIC_COMMENT_NOTICE"))+"\n                    ")]]:e._e()],2),t("div",{staticClass:"composer-modal__form-row"},[t("div",{staticClass:"composer-modal__form-actions"},[t("div",{staticClass:"composer-modal__form-action",on:{click:e.attachScreenshot}},[t("img",{attrs:{src:r("d163"),alt:"Attach"}}),t("span",[e._v(e._s(e.$t("SCREENSHOT")))])]),t("div",{staticClass:"composer-modal__form-action",on:{click:e.requestSupport}},[t("img",{attrs:{src:r("2621"),alt:"Support"}}),t("span",[e._v(e._s(e.$t("REQUEST_STAFF_SUPPORT")))])])]),e.canPostAsStaff&&null===e.forceType?t("div",{staticClass:"composer-modal__form-private"},[t("Checkbox",{attrs:{value:e.isPrivateReply},on:{input:function(t){e.isPrivateReply=t}}},[e._v("\n                        "+e._s(e.$t("REPLY_PRIVATELY"))+"\n                    ")])],1):e._e()])],1),t("div",{staticClass:"composer-modal__footer"},[t("Button",{attrs:{type:"secondary"},on:{click:e.cancel}},[e._v(e._s(e.$t("CANCEL")))]),t("Button",{attrs:{disabled:!e.message.trim()||e.isPostingLocked,type:"primary"},on:{click:e.submitMessage}},[e._v("\n                "+e._s(e.postingButtonText)+"\n            ")])],1)]),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/png,image/jpeg,image/heic"},on:{change:e.handleFileChange}})])},yt=[];function bt(e){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bt(e)}function wt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */wt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),s=new T(n||[]);return o(i,"_invoke",{value:C(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",m="suspendedYield",p="executing",h="completed",g={};function v(){}function y(){}function b(){}var w={};c(w,i,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(L([])));S&&S!==r&&n.call(S,i)&&(w=S);var P=b.prototype=v.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,a,i,s){var u=d(e[o],e,a);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==bt(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=f;return function(a,i){if(o===p)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=M(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?h:m,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=h,n.method="throw",n.arg=c.arg)}}}function M(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(bt(t)+" is not iterable")}return y.prototype=b,o(P,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},x(E.prototype),c(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(P),c(P,u,"Generator"),c(P,i,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function _t(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,o)}function St(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){_t(a,n,o,i,s,"next",e)}function s(e){_t(a,n,o,i,s,"throw",e)}i(void 0)}))}}var Pt={name:"MessageComposerModal",components:{VModal:ft["a"],Button:at["a"],VTextarea:it["a"],Checkbox:ut["a"]},props:{topic:{type:String,required:!0},isPrivate:{type:Boolean,default:!1},forceType:{type:String,default:null,validator:function(e){return null===e||"public"===e||"private"===e}},isPostingLocked:{type:Boolean,default:!1}},data:function(){return{message:"",replyingTo:null,isPrivateReply:!1,fileUploading:!1,postingAsStaff:!1,maxImageDimension:780,isProcessingPaste:!1}},computed:{isCustomerMode:function(){var e;return!(null===(e=this.$store.state.customerProfile)||void 0===e||!e.email)},canPostAsStaff:function(){var e;return!(null===(e=this.$store.state.publisherProfile)||void 0===e||!e.email)},postingButtonText:function(){return this.isPostingLocked?this.$t("PLEASE_WAIT"):this.fileUploading?this.$t("UPLOADING"):this.postingAsStaff?this.$t("POST_AS_DEVELOPER_STAFF"):this.$t("POST")}},mounted:function(){},beforeDestroy:function(){},methods:{clearForm:function(){this.message="",this.replyingTo=null,this.isPrivateReply="private"===this.forceType,this.postingAsStaff=!1},cancel:function(){this.$modal.hide("compose-message")},openAsUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.postingAsStaff=!1,this.replyingTo=e,this.isPrivateReply="private"===this.forceType,this.$modal.show("compose-message"),this.focusTextarea()},openAsStaff:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.postingAsStaff=!0,this.replyingTo=e,this.isPrivateReply="private"===this.forceType,this.$modal.show("compose-message"),this.focusTextarea()},cancelReply:function(){this.replyingTo=null},submitMessage:function(){!this.message.trim()||this.fileUploading||this.isPostingLocked||(this.$emit("submit-message",{message:this.message,replyingTo:this.replyingTo,isPrivateReply:this.isPrivateReply,asStaff:this.postingAsStaff}),this.$modal.hide("compose-message"))},attachScreenshot:function(){this.$refs.fileInput.click()},handleFileChange:function(e){var t=this;return St(wt().mark((function r(){var n,o,i,s;return wt().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.target.files[0],n){r.next=3;break}return r.abrupt("return");case 3:return t.fileUploading=!0,r.prev=4,r.next=7,t.processImageFile(n);case 7:if(o=r.sent,o){r.next=11;break}return a["default"].notify({type:"error",text:"Unsupported image format. Please use PNG, JPEG, or HEIC images."}),r.abrupt("return");case 11:return r.next=13,a["default"].prototype.$api.uploadFile({type:"support_image",file:o});case 13:i=r.sent,i&&(s="![screenshot](".concat(i,")"),t.message=t.message+"\n"+s),r.next=21;break;case 17:r.prev=17,r.t0=r["catch"](4),console.error("Failed to upload screenshot:",r.t0),a["default"].notify({type:"error",text:t.$t("FAILED_TO_UPLOAD_IMAGE")+(r.t0.message||t.$t("UNKNOWN_ERROR"))});case 21:return r.prev=21,t.fileUploading=!1,t.$refs.fileInput.value="",r.finish(21);case 25:case"end":return r.stop()}}),r,null,[[4,17,21,25]])})))()},processImageFile:function(e){var t=this;return St(wt().mark((function n(){var o,a,i;return wt().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("Processing image file type:",e.type),e.type.startsWith("image/")||"application/octet-stream"===e.type){n.next=4;break}return console.error("Not an image file:",e.type),n.abrupt("return",null);case 4:if(n.prev=4,"application/octet-stream"!==e.type&&""!==e.type||(console.log("Treating unknown file type as image"),o=new File([e],"screenshot.png",{type:"image/png"}),e=o),!("image/heic"===e.type||"image/heif"===e.type||e.name&&e.name.toLowerCase().endsWith(".heic"))){n.next=22;break}return n.prev=7,console.log("Converting HEIC image"),n.next=11,r.e("chunk-2d0cbe66").then(r.t.bind(null,"4c45",7));case 11:return a=n.sent,n.next=14,a.default({blob:e,toType:"image/png"});case 14:i=n.sent,e=new File([i],e.name?e.name.replace(/\.(heic|heif)$/i,".png"):"screenshot.png",{type:"image/png"}),n.next=22;break;case 18:throw n.prev=18,n.t0=n["catch"](7),console.error("Failed to convert HEIC image:",n.t0),new Error("Failed to convert HEIC image. Please try another format.");case 22:return n.next=24,t.resizeImage(e);case 24:return n.abrupt("return",n.sent);case 27:throw n.prev=27,n.t1=n["catch"](4),console.error("Error processing image file:",n.t1),n.t1;case 31:case"end":return n.stop()}}),n,null,[[4,27],[7,18]])})))()},createImageFromFile:function(e){return new Promise((function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=function(e){return r(e)},n.src=URL.createObjectURL(e)}))},resizeImage:function(e){var t=this;return St(wt().mark((function r(){var n,o,a;return wt().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,console.log("Resizing image:",e.type,e.name),r.next=4,t.createImageFromFile(e);case 4:if(n=r.sent,console.log("Image loaded, dimensions:",n.width,"x",n.height),!(n.width<=t.maxImageDimension&&n.height<=t.maxImageDimension)){r.next=11;break}if(console.log("No resize needed"),"image/png"===e.type){r.next=10;break}return r.abrupt("return",t.convertToPng(n));case 10:return r.abrupt("return",e);case 11:return n.width>n.height?(o=t.maxImageDimension,a=Math.floor(n.height*(t.maxImageDimension/n.width))):(a=t.maxImageDimension,o=Math.floor(n.width*(t.maxImageDimension/n.height))),console.log("Resizing to:",o,"x",a),r.abrupt("return",t.convertToPng(n,o,a));case 16:return r.prev=16,r.t0=r["catch"](0),console.error("Error resizing image:",r.t0),r.abrupt("return",e);case 20:case"end":return r.stop()}}),r,null,[[0,16]])})))()},convertToPng:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((function(n,o){try{var a=t||e.width,i=r||e.height,s=document.createElement("canvas");s.width=a,s.height=i;var u=s.getContext("2d");u.drawImage(e,0,0,a,i),s.toBlob((function(e){if(!e)return console.error("Failed to create blob from canvas"),void o(new Error("Failed to create image from canvas"));var t="pasted-image-"+(new Date).getTime()+".png",r=new File([e],t,{type:"image/png"});console.log("Converted to PNG:",r.size,"bytes"),n(r)}),"image/png",.95)}catch(c){console.error("Error in canvas conversion:",c),o(c)}}))},handlePaste:function(e){var t=this;if(console.log("Paste event triggered in modal",e),this.isProcessingPaste||this.fileUploading)console.log("Already processing an image, ignoring duplicate paste event");else if(e.clipboardData||window.clipboardData){var r=e.clipboardData||window.clipboardData,n=r.items;if(console.log("Clipboard items:",n,r.types),n){for(var o=!1,a=0;a<n.length;a++){var i=n[a];if(console.log("Processing item:",i.type,i.kind),0===i.type.indexOf("image")){o=!0,e.preventDefault();var s=i.getAsFile();console.log("Found image file:",s),s?(this.isProcessingPaste=!0,this.handlePastedImage(s).finally((function(){t.isProcessingPaste=!1}))):console.error("Failed to get file from clipboard item");break}}o||console.log("No image found in clipboard, continuing with normal paste")}else console.error("No clipboard items found")}else console.error("No clipboard data available")},handlePastedImage:function(e){var t=this;return St(wt().mark((function r(){var n,o,i;return wt().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=3;break}return console.error("No file received from paste"),r.abrupt("return",Promise.resolve());case 3:return console.log("Processing pasted image:",e.type,e.name,e.size),t.fileUploading=!0,a["default"].notify({type:"info",text:t.$t("PROCESSING_IMAGE")}),r.prev=6,r.next=9,t.processImageFile(e);case 9:if(n=r.sent,n){r.next=13;break}return a["default"].notify({type:"error",text:t.$t("UNSUPPORTED_IMAGE_FORMAT")}),r.abrupt("return",Promise.resolve());case 13:return console.log("Processed file:",n.type,n.name,n.size),r.next=16,a["default"].prototype.$api.uploadFile({type:"support_image",file:n});case 16:if(o=r.sent,!o){r.next=25;break}return console.log("Upload successful, inserting markdown:",o),i="![pasted-image](".concat(o,")"),t.message=t.message+"\n"+i,a["default"].notify({type:"success",text:t.$t("IMAGE_UPLOADED_SUCCESSFULLY")}),r.abrupt("return",Promise.resolve(o));case 25:return console.error("Upload returned empty response"),a["default"].notify({type:"error",text:t.$t("FAILED_TO_UPLOAD_IMAGE_EMPTY_RESPONSE")}),r.abrupt("return",Promise.resolve());case 28:r.next=35;break;case 30:return r.prev=30,r.t0=r["catch"](6),console.error("Failed to upload pasted image:",r.t0),a["default"].notify({type:"error",text:t.$t("FAILED_TO_UPLOAD_PASTED_IMAGE")+(r.t0.message||t.$t("UNKNOWN_ERROR"))}),r.abrupt("return",Promise.reject(r.t0));case 35:return r.prev=35,t.fileUploading=!1,r.finish(35);case 38:case"end":return r.stop()}}),r,null,[[6,30,35,38]])})))()},requestSupport:function(){this.message.trim()?this.message=this.message.trim()+"\n\n@staff "+this.$t("PLEASE_HELP_WITH_ISSUE"):this.message="@staff "+this.$t("PLEASE_HELP_WITH_ISSUE")},focusTextarea:function(){var e=this;setTimeout((function(){if(e.$refs.messageTextarea){var t=e.$refs.messageTextarea.$el.querySelector("textarea");t&&t.focus()}}),100)}}},xt=Pt,Et=(r("639a"),Object(rt["a"])(xt,vt,yt,!1,null,"831a2804",null)),Ct=Et.exports;function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function kt(e){return $t(e)||Lt(e)||Tt(e)||Ot()}function Ot(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tt(e,t){if(e){if("string"===typeof e)return At(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?At(e,t):void 0}}function Lt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function $t(e){if(Array.isArray(e))return At(e)}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(r),!0).forEach((function(t){Nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nt(e,t,r){return t=jt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jt(e){var t=Ft(e,"string");return"symbol"===Mt(t)?t:String(t)}function Ft(e,t){if("object"!==Mt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function It(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */It=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),s=new T(n||[]);return o(i,"_invoke",{value:C(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",m="suspendedYield",p="executing",h="completed",g={};function v(){}function y(){}function b(){}var w={};c(w,i,(function(){return this}));var _=Object.getPrototypeOf,S=_&&_(_(L([])));S&&S!==r&&n.call(S,i)&&(w=S);var P=b.prototype=v.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,a,i,s){var u=d(e[o],e,a);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Mt(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(u.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,r,n){var o=f;return function(a,i){if(o===p)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var u=M(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?h:m,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=h,n.method="throw",n.arg=c.arg)}}}function M(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,M(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Mt(t)+" is not iterable")}return y.prototype=b,o(P,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},x(E.prototype),c(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(l(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(P),c(P,u,"Generator"),c(P,i,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function Ut(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,o)}function Wt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Ut(a,n,o,i,s,"next",e)}function s(e){Ut(a,n,o,i,s,"throw",e)}i(void 0)}))}}var Yt={name:"Discussion",components:{DiscussionMessage:ot,Button:at["a"],VTextarea:it["a"],VInput:st["a"],Checkbox:ut["a"],Loader:ct["a"],ReportModal:gt,MessageComposerModal:Ct,VModal:ft["a"]},props:{topic:{type:String,required:!0},isPrivate:{type:Boolean,default:!1},forceType:{type:String,default:null,validator:function(e){return null===e||"public"===e||"private"===e}},canCommentAsUser:{type:Boolean,default:!1},canCommentAsStaff:{type:Boolean,default:!1},disabledReason:{type:String,default:""},isPurchaseDiscussion:{type:Boolean,default:!1}},data:function(){return{messages:[],messagesLoaded:!1,newMessage:"",replyingTo:null,isPrivateReply:!1,customerName:"",fileUploading:!1,total:0,isPostingLocked:!1,postCooldownSeconds:10,postCooldownTimer:null,currentReplyMessage:null}},computed:{isCustomerMode:function(){var e;return!(null===(e=this.$store.state.customerProfile)||void 0===e||!e.email)},isStaffMode:function(){var e,t;return console.log("isStaffMode check",null===(e=this.$store.state.publisherProfile)||void 0===e?void 0:e.email),!(null===(t=this.$store.state.publisherProfile)||void 0===t||!t.email)},canComment:function(){return this.canCommentAsUser&&this.isCustomerMode||this.canCommentAsStaff&&this.isStaffMode},needsNameInput:function(){var e;return this.isCustomerMode&&!(null!==(e=this.$store.state.customerProfile)&&void 0!==e&&e.name)},topLevelMessages:function(){return this.messages.filter((function(e){return!e.reply_to_id}))}},mounted:function(){this.topic&&this.loadProfiles()},methods:{loadProfiles:function(){var e=this;return Wt(It().mark((function t(){var r,n,o,i;return It().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,null!==(r=e.$store.state.customerProfile)&&void 0!==r&&r.id){t.next=6;break}return t.next=4,a["default"].prototype.$api.getCustomerProfile({st:e.$store.state.st,lt:e.$store.state.lt});case 4:o=t.sent,o.success&&e.$store.commit("setCustomerProfile",o.data);case 6:if(null!==(n=e.$store.state.publisherProfile)&&void 0!==n&&n.id){t.next=12;break}return t.next=9,a["default"].prototype.$api.getPublisherProfile({st:e.$store.state.st,lt:e.$store.state.lt});case 9:i=t.sent,console.log("publisherProfile",i),i.success&&e.$store.commit("setPublisherProfile",i.data);case 12:e.fetchMessages(),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](0),console.error("Failed to load profiles:",t.t0),e.fetchMessages();case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},fetchMessages:function(){var e=this;return Wt(It().mark((function t(){var r;return It().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a["default"].prototype.$api.post("get_messages",{topic:e.topic,start:0,length:100,st:e.$store.state.st,lt:e.$store.state.lt},!1);case 3:r=t.sent,r.success&&(e.messages=r.data,e.total=r.total),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("Failed to fetch messages:",t.t0);case 10:return t.prev=10,e.messagesLoaded=!0,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})))()},getAllMessages:function(){var e={};this.messages.forEach((function(t){e[t.id]=Dt(Dt({},t),{},{children:[]})}));var t=[];return this.messages.forEach((function(r){r.reply_to_id&&e[r.reply_to_id]?e[r.reply_to_id].children.push(e[r.id]):t.push(e[r.id])})),{messagesMap:e,rootMessages:t}},getRepliesForMessage:function(e){return this.messages.filter((function(t){return t.reply_to_id===e}))},handleReply:function(e){this.canCommentAsUser&&this.canCommentAsStaff?(this.currentReplyMessage=e,this.$modal.show("reply-type-selector")):this.canCommentAsStaff?this.openStaffComposer(e):this.canCommentAsUser&&this.openUserComposer(e)},cancelReply:function(){this.replyingTo=null},saveName:function(){var e=this;return Wt(It().mark((function t(){var r;return It().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.customerName.trim()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,a["default"].prototype.$api.post("edit_customer_profile",{name:e.customerName,st:e.$store.state.st,lt:e.$store.state.lt});case 5:r=t.sent,r&&e.$store.commit("setCustomerProfile",r),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.error("Failed to save name:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},requestSupport:function(){this.newMessage=this.newMessage+"\n\n@staff "+this.$t("PLEASE_HELP_WITH_ISSUE")},openUserComposer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("Opening composer as user with reply to:",e),this.$refs.messageComposer?this.$refs.messageComposer.openAsUser(e):console.error("messageComposer ref not found")},openStaffComposer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;console.log("Opening composer as staff with reply to:",e),this.$refs.messageComposer?this.$refs.messageComposer.openAsStaff(e):console.error("messageComposer ref not found")},handleMessageSubmit:function(e){var t=this;return Wt(It().mark((function r(){var n,o;return It().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.message&&!t.isPostingLocked){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,t.isPostingLocked=!0,n={topic:t.topic,message:e.message,as_staff:e.asStaff?1:0,is_private:t.isPrivate||e.isPrivateReply?1:0,st:t.$store.state.st||"",lt:t.$store.state.lt||""},e.replyingTo&&e.replyingTo.id&&(n.reply_to_id=e.replyingTo.id),r.next=8,a["default"].prototype.$api.post("post_message",n,!0);case 8:return o=r.sent,o&&(o.isNew=!0,t.messages.unshift(o),setTimeout((function(){var e=t.messages.findIndex((function(e){return e.id===o.id}));-1!==e&&(t.messages[e].isNew=!1)}),1e3),t.startPostCooldown(),a["default"].notify({type:"success",text:t.$t("COMMENT_POSTED_SUCCESSFULLY")})),r.abrupt("return",!0);case 13:return r.prev=13,r.t0=r["catch"](2),console.error("Failed to post message:",r.t0),t.isPostingLocked=!1,a["default"].notify({type:"error",text:t.$t("FAILED_TO_POST_MESSAGE")+(r.t0.message||t.$t("UNKNOWN_ERROR"))}),r.abrupt("return",!1);case 19:case"end":return r.stop()}}),r,null,[[2,13]])})))()},startPostCooldown:function(){var e=this,t=this.postCooldownSeconds;this.postCooldownTimer=setInterval((function(){t-=1,t<=0&&(e.isPostingLocked=!1,clearInterval(e.postCooldownTimer),e.postCooldownTimer=null)}),1e3)},beforeDestroy:function(){this.postCooldownTimer&&clearInterval(this.postCooldownTimer)},handleLoadMoreReplies:function(e){var t=this;return Wt(It().mark((function r(){var n,o,i,s,u;return It().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,n=t.messages.filter((function(t){return t.reply_to_id===e})),!(n.length>0)){r.next=13;break}return r.next=5,a["default"].prototype.$api.post("get_messages",{topic:t.topic,ids:[e],st:t.$store.state.st,lt:t.$store.state.lt},!1);case 5:if(o=r.sent,!(o.success&&o.data&&o.data.length>0)){r.next=13;break}if(i=o.data[0],!(i.replies_ids&&i.replies_ids.length>0)){r.next=13;break}return r.next=11,a["default"].prototype.$api.post("get_messages",{topic:t.topic,ids:i.replies_ids,st:t.$store.state.st,lt:t.$store.state.lt},!1);case 11:s=r.sent,s.success&&s.data&&(u=s.data.filter((function(e){return!t.messages.some((function(t){return t.id===e.id}))})),u.length>0&&(t.messages=[].concat(kt(t.messages),kt(u))));case 13:r.next=18;break;case 15:r.prev=15,r.t0=r["catch"](0),console.error("Failed to load more replies:",r.t0);case 18:case"end":return r.stop()}}),r,null,[[0,15]])})))()},handleReportMessage:function(e){this.$refs.reportModal.setMessageData(e),this.$modal.show("report-message")},submitReport:function(e){var t=this;return Wt(It().mark((function r(){var n,o,i;return It().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.reason&&!t.isPostingLocked){r.next=2;break}return r.abrupt("return");case 2:return n="@staff ".concat(t.$t("I_REPORTED_THIS"),": ").concat(e.reason),r.prev=3,t.isPostingLocked=!0,o={topic:t.topic,message:n,as_staff:0,is_private:0,st:t.$store.state.st||"",lt:t.$store.state.lt||""},e.messageData&&e.messageData.id&&(o.reply_to_id=e.messageData.id),r.next=9,a["default"].prototype.$api.post("post_message",o,!0);case 9:return i=r.sent,i&&(i.isNew=!0,t.messages.unshift(i),setTimeout((function(){var e=t.messages.findIndex((function(e){return e.id===i.id}));-1!==e&&(t.messages[e].isNew=!1)}),1e3),t.startPostCooldown(),a["default"].notify({type:"success",text:t.$t("REPORT_SUBMITTED_SUCCESSFULLY")})),r.abrupt("return",!0);case 14:return r.prev=14,r.t0=r["catch"](3),console.error("Failed to submit report:",r.t0),t.isPostingLocked=!1,a["default"].notify({type:"error",text:t.$t("FAILED_TO_SUBMIT_REPORT")+(r.t0.message||t.$t("UNKNOWN_ERROR"))}),r.abrupt("return",!1);case 20:case"end":return r.stop()}}),r,null,[[3,14]])})))()},handleMessageRead:function(e){var t=this;return Wt(It().mark((function r(){var n;return It().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a["default"].prototype.$api.post("set_message_read",{id:e,topic:t.topic,st:t.$store.state.st,lt:t.$store.state.lt});case 3:if(n=r.sent,!n||!n.success){r.next=7;break}return r.next=7,t.$store.dispatch("getDevices");case 7:return r.abrupt("return",n);case 10:throw r.prev=10,r.t0=r["catch"](0),console.error("Failed to mark message as read:",r.t0),r.t0;case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},handleCancelReplyTypeSelection:function(){this.currentReplyMessage=null,this.$modal.hide("reply-type-selector")},handleReplyAsUser:function(){this.currentReplyMessage&&(this.openUserComposer(this.currentReplyMessage),this.currentReplyMessage=null),this.$modal.hide("reply-type-selector")},handleReplyAsStaff:function(){this.currentReplyMessage&&(this.openStaffComposer(this.currentReplyMessage),this.currentReplyMessage=null),this.$modal.hide("reply-type-selector")}}},Gt=Yt,Bt=(r("9890"),Object(rt["a"])(Gt,n,o,!1,null,"45d9ccfe",null));t["a"]=Bt.exports},d9c6:function(e,t,r){"use strict";r("3b9d")},e05c:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t,r){return t=a(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=i(e,"string");return"symbol"===n(t)?t:String(t)}function i(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var s=function(){var e=this,t=e._self._c;return t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.modelValue,expression:"modelValue"}],staticClass:"textarea",class:o({textarea_error:e.error},"textarea_resize-".concat(e.resize),e.resize),domProps:{value:e.modelValue},on:{input:function(t){t.target.composing||(e.modelValue=t.target.value)}}})},u=[],c={props:{value:String,error:Boolean,resize:String},computed:{modelValue:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}}},l=c,d=(r("e4c1"),r("2877")),f=Object(d["a"])(l,s,u,!1,null,"1da3a18d",null);t["a"]=f.exports},e4c1:function(e,t,r){"use strict";r("1658")},e4f3:function(e,t,r){"use strict";r("c335")}}]);
//# sourceMappingURL=chunk-2a1460ca.03ec333b.js.map