{"version":3,"sources":["webpack:///./src/views/My/Devices.vue","webpack:///src/views/My/Devices.vue","webpack:///./src/views/My/Devices.vue?041f","webpack:///./src/views/My/Devices.vue?4de9","webpack:///./src/views/My/Devices.vue?2385"],"names":["render","_vm","this","_c","_self","staticClass","attrs","$t","isMobile","email","devices","emailChangeLink","_l","device","key","lt","class","device_active","$store","getters","device_disabled","deviceRemoving","device_switchable","canSwitchToDevice","transitioning","on","$event","switchDeviceMobile","link_type","icon","_v","_s","model","plus","_e","ref","refInFor","preventDefault","removeDevice","ios","name","switchDevice","isSwitchBack","href","code","qrCodeBg","concat","domProps","link","staticRenderFns","components","qrcode","QrcodeVue","HtmlWithLinks","data","title","isItselfLinkable","computed","_objectSpread","mapState","deviceStr","currentDevice","_this","find","methods","oldLinkToken","localStorage","getItem","console","log","currentLinkType","config","deviceLinkType","deviceLt","match","some","d","removeItem","linkType","_this2","setItem","commit","dispatch","then","getCode","finally","setTimeout","e","$refs","el","target","includes","$notify","type","text","_this3","$confirm","$api","unlinkDevice","_this4","getLinkCode","created","component"],"mappings":"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","file":"js/chunk-7096f480.218e6d3c.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"main\"},[_c('html-with-links',{staticClass:\"intro\",attrs:{\"tag\":\"h1\",\"html\":_vm.$t('THIS_' + (_vm.isMobile ? 'DEVICE' : 'COMPUTER') + '_IS_LINKED_TO_APPDB', {\n    email: (_vm.devices[0] || {}).email,\n    emailChangeLink: '/my/change-email'\n  })}}),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"devices\"},_vm._l((_vm.devices),function(device){return _c('div',{key:device.lt,staticClass:\"device\",class:{\n        device_active: device.lt === _vm.$store.getters.lt,\n        device_disabled: _vm.deviceRemoving === device.lt,\n        device_switchable: device.lt !== _vm.$store.getters.lt && _vm.canSwitchToDevice(device) && !_vm.transitioning\n      },on:{\"click\":function($event){return _vm.switchDeviceMobile(device.lt, device.link_type, $event)}}},[_c('div',{staticClass:\"device__img-wrapper\"},[_c('img',{staticClass:\"device__img\",attrs:{\"src\":device.icon}})]),_c('div',{staticClass:\"device__desc\"},[_c('span',{staticClass:\"device__title\"},[_vm._v(\"\\n            \"+_vm._s(device.model)+\"\\n            \"),(device.plus)?_c('span',{staticClass:\"device__pro\"},[_vm._v(\"Plus\")]):_vm._e(),(device.lt !== _vm.$store.getters.lt)?_c('a',{ref:\"removeDevice\",refInFor:true,staticClass:\"device__remove\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.removeDevice(device.lt)}}},[_vm._v(_vm._s(_vm.deviceRemoving === device.lt\n                  ? _vm.$t(\"REMOVING\")\n                  : _vm.$t(\"REMOVE\")))]):_vm._e()]),_c('span',{staticClass:\"device__info\"},[_vm._v(_vm._s(device.ios)),(device.name)?_c('span',[_vm._v(\", \"+_vm._s(device.name))]):_vm._e()])]),(device.lt !== _vm.$store.getters.lt && _vm.canSwitchToDevice(device) && !_vm.transitioning)?_c('div',{staticClass:\"device__switch\"},[_c('button',{staticClass:\"device__button\",on:{\"click\":function($event){$event.preventDefault();return _vm.switchDevice(device.lt, device.link_type)}}},[_vm._v(\"\\n            \"+_vm._s(_vm.isSwitchBack(device) ? _vm.$t(\"SWITCH_BACK\") : _vm.$t(\"SWITCH\"))+\"\\n          \")]),_c('div',{staticClass:\"device__switch-text\"},[_vm._v(_vm._s(_vm.$t(\"TO_THIS_DEVICE\")))])]):(device.lt !== _vm.$store.getters.lt && !_vm.canSwitchToDevice(device) && !_vm.transitioning)?_c('div',{staticClass:\"device__switch\"},[_c('div',{staticClass:\"device__switch-text\"},[_vm._v(_vm._s(_vm.$t(\"CAN_BE_USED_ONLY_DIRECTLY\")))])]):_vm._e(),_c('div',{staticClass:\"device__mobile-indicator\"},[(device.lt === _vm.$store.getters.lt)?_c('span',{staticClass:\"device__mobile-no-switch\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"SELECTED_DEVICE\"))+\"\\n          \")]):(_vm.canSwitchToDevice(device) && !_vm.transitioning)?_c('span',{staticClass:\"device__mobile-switch\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"SWITCH\"))+\" →\\n          \")]):(!_vm.canSwitchToDevice(device) && !_vm.transitioning)?_c('span',{staticClass:\"device__mobile-no-switch\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"CAN_BE_USED_ONLY_DIRECTLY\"))+\"\\n          \")]):(_vm.transitioning)?_c('span',{staticClass:\"device__mobile-switch\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"SWITCHING\"))+\"...\\n          \")]):_vm._e()])])}),0),_c('div',{staticClass:\"link\"},[_c('html-with-links',{staticClass:\"link__title\",attrs:{\"tag\":\"h2\",\"html\":_vm.$t('LINK_NEW_APPLE_SILICON_MAC_USE_APPDB_TOOLS', {\n        href: '/appdb-tools'\n      })}}),_c('h2',{staticClass:\"link__title\"},[_vm._v(_vm._s(_vm.$t(\"LINK_NEW_DEVICE\")))]),_c('p',{staticClass:\"link__text\"},[_c('a',{attrs:{\"href\":\"https://www.youtube.com/watch?v=Tp3chHFX0NE\",\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.$t('VIDEO_TUTORIAL')))]),_c('br'),_c('br')]),_c('p',{staticClass:\"link__text\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t(\"IF_YOU_NEED_TO_LINK_NEW_DEVICE_HERES_CODE\"))+\"\\n      \")]),_c('span',{staticClass:\"link__code\"},[_vm._v(_vm._s(_vm.code))]),_c('qrcode',{staticClass:\"link__qr\",attrs:{\"background\":_vm.qrCodeBg,\"value\":`https://a.appdb.to/add/?${_vm.code}`}}),_c('h2',{staticClass:\"link__title\"},[_vm._v(_vm._s(_vm.$t(\"TO_LINK_APPLE_TV\")))]),_c('ul',{staticClass:\"link__list\",domProps:{\"innerHTML\":_vm._s(_vm.$t('LINK_APPLE_TV_STEPS', {\n        link: `https://a.appdb.to/add/?${_vm.code}`,\n      })\n        )}})],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"main\">\n    <html-with-links tag=\"h1\" class=\"intro\" :html=\"$t('THIS_' + (isMobile ? 'DEVICE' : 'COMPUTER') + '_IS_LINKED_TO_APPDB', {\n      email: (devices[0] || {}).email,\n      emailChangeLink: '/my/change-email'\n    })\" />\n    <div class=\"row\">\n      <div class=\"devices\">\n        <div class=\"device\" v-for=\"device in devices\" :class=\"{\n          device_active: device.lt === $store.getters.lt,\n          device_disabled: deviceRemoving === device.lt,\n          device_switchable: device.lt !== $store.getters.lt && canSwitchToDevice(device) && !transitioning\n        }\" :key=\"device.lt\" @click=\"switchDeviceMobile(device.lt, device.link_type, $event)\">\n          <div class=\"device__img-wrapper\">\n            <img class=\"device__img\" :src=\"device.icon\" />\n          </div>\n          <div class=\"device__desc\">\n            <span class=\"device__title\">\n              {{ device.model }}\n              <span v-if=\"device.plus\" class=\"device__pro\">Plus</span>\n              <a v-if=\"device.lt !== $store.getters.lt\" ref=\"removeDevice\" href=\"#\" class=\"device__remove\"\n                @click.prevent=\"removeDevice(device.lt)\">{{\n                  deviceRemoving === device.lt\n                    ? $t(\"REMOVING\")\n                    : $t(\"REMOVE\")\n                }}</a>\n            </span>\n            <span class=\"device__info\">{{ device.ios }}<span v-if=\"device.name\">, {{ device.name }}</span></span>\n          </div>\n          <div class=\"device__switch\"\n            v-if=\"device.lt !== $store.getters.lt && canSwitchToDevice(device) && !transitioning\">\n            <button class=\"device__button\" @click.prevent=\"switchDevice(device.lt, device.link_type)\">\n              {{ isSwitchBack(device) ? $t(\"SWITCH_BACK\") : $t(\"SWITCH\") }}\n            </button>\n            <div class=\"device__switch-text\">{{ $t(\"TO_THIS_DEVICE\") }}</div>\n          </div>\n          <div class=\"device__switch\"\n            v-else-if=\"device.lt !== $store.getters.lt && !canSwitchToDevice(device) && !transitioning\">\n            <div class=\"device__switch-text\">{{ $t(\"CAN_BE_USED_ONLY_DIRECTLY\") }}</div>\n          </div>\n          <div class=\"device__mobile-indicator\">\n            <span v-if=\"device.lt === $store.getters.lt\" class=\"device__mobile-no-switch\">\n              {{ $t(\"SELECTED_DEVICE\") }}\n            </span>\n            <span v-else-if=\"canSwitchToDevice(device) && !transitioning\" class=\"device__mobile-switch\">\n              {{ $t(\"SWITCH\") }} →\n            </span>\n            <span v-else-if=\"!canSwitchToDevice(device) && !transitioning\" class=\"device__mobile-no-switch\">\n              {{ $t(\"CAN_BE_USED_ONLY_DIRECTLY\") }}\n            </span>\n            <span v-else-if=\"transitioning\" class=\"device__mobile-switch\">\n              {{ $t(\"SWITCHING\") }}...\n            </span>\n          </div>\n        </div>\n      </div>\n      <div class=\"link\">\n\n        <html-with-links tag=\"h2\" class=\"link__title\" :html=\"$t('LINK_NEW_APPLE_SILICON_MAC_USE_APPDB_TOOLS', {\n          href: '/appdb-tools'\n        })\" />\n        <h2 class=\"link__title\">{{ $t(\"LINK_NEW_DEVICE\") }}</h2>\n        <p class=\"link__text\">\n          <a href=\"https://www.youtube.com/watch?v=Tp3chHFX0NE\" target=\"_blank\">{{ $t('VIDEO_TUTORIAL')\n          }}</a><br /><br />\n        </p>\n        <p class=\"link__text\">\n          {{ $t(\"IF_YOU_NEED_TO_LINK_NEW_DEVICE_HERES_CODE\") }}\n        </p>\n        <span class=\"link__code\">{{ code }}</span>\n        <qrcode class=\"link__qr\" :background=\"qrCodeBg\" :value=\"`https://a.appdb.to/add/?${code}`\" />\n        <h2 class=\"link__title\">{{ $t(\"TO_LINK_APPLE_TV\") }}</h2>\n        <ul class=\"link__list\" v-html=\"$t('LINK_APPLE_TV_STEPS', {\n          link: `https://a.appdb.to/add/?${code}`,\n        })\n          \"></ul>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport isItselfLinkable from '@/utils/isItselfLinkable';\nimport QrcodeVue from 'qrcode.vue';\nimport { mapState } from 'vuex';\n\nimport HtmlWithLinks from '@/components/HtmlWithLinks.vue';\n\nexport default {\n  components: { qrcode: QrcodeVue, HtmlWithLinks },\n  data() {\n    return {\n      title: 'My devices',\n      code: '',\n      isMobile: isItselfLinkable(),\n      deviceRemoving: null,\n      transitioning: false,\n    };\n  },\n  computed: {\n    ...mapState(['theme', 'config']),\n    qrCodeBg() {\n      // Always return white for QR code background regardless of theme\n      return '#FFFFFF';\n    },\n    devices() {\n      return this.$store.getters.devices;\n    },\n    deviceStr() {\n      return isItselfLinkable() ? 'iPhone/iPad/iPod/Vision Pro' : 'PC/Mac';\n    },\n    currentDevice() {\n      return this.devices.find(device => device.lt === this.$store.getters.lt) || {};\n    },\n  },\n  methods: {\n    isSwitchBack(device) {\n      const oldLinkToken = localStorage.getItem('old_lt');\n      // Debug output to check values\n      console.log('Switch back check:', {\n        currentLinkType: this.config.link_type,\n        deviceLinkType: device.link_type,\n        oldLinkToken: oldLinkToken,\n        deviceLt: device.lt,\n        match: oldLinkToken === device.lt\n      });\n\n      // Handle the case where device.link_type is not available\n      const deviceLinkType = device.link_type;\n\n      return this.config.link_type === 'mdm' &&\n        deviceLinkType === 'profile' &&\n        oldLinkToken === device.lt;\n    },\n    canSwitchToDevice(device) {\n      if (this.transitioning) {\n        return false;\n      }\n\n      const oldLinkToken = localStorage.getItem('old_lt');\n      const deviceLinkType = device.link_type;\n\n      // Case 1: current is MDM\n      if (this.config.link_type === 'mdm') {\n        // Can always switch to MDM devices\n        if (deviceLinkType === 'mdm') {\n          return true;\n        }\n\n        // For profile devices, check if it matches the old_lt\n        if (deviceLinkType === 'profile') {\n          // If old_lt exists but doesn't match any device, clear it\n          if (oldLinkToken && !this.devices.some(d => d.lt === oldLinkToken)) {\n            localStorage.removeItem('old_lt');\n            return false;\n          }\n\n          // Can switch to profile device only if it matches old_lt\n          return oldLinkToken === device.lt;\n        }\n      }\n\n      // Case 2: current is profile\n      if (this.config.link_type === 'profile') {\n        // Can switch to MDM devices\n        if (deviceLinkType === 'mdm') {\n          return true;\n        }\n\n        // For profile devices, check if old_lt doesn't match\n        if (deviceLinkType === 'profile') {\n          // Cannot switch to other profile devices\n          return false;\n        }\n      }\n\n      // Default fallback\n      return true;\n    },\n    switchDevice(lt, linkType) {\n      this.transitioning = true;\n\n      if (this.config.link_type === 'profile') {\n        localStorage.setItem('old_lt', this.$store.getters.lt);\n      }\n\n      this.$store.commit('lt', lt);\n      this.$store.commit('setConfig', {});\n\n      this.$store.dispatch('getConfig')\n        .then(() => {\n          this.getCode();\n        })\n        .finally(() => {\n          setTimeout(() => {\n            this.transitioning = false;\n          }, 300);\n        });\n    },\n    switchDeviceMobile(lt, linkType, e) {\n      // Check if this is a click on the remove device button\n      if (this.$refs.removeDevice && this.$refs.removeDevice.some(el => el === e.target)) {\n        return;\n      }\n\n      // Get the device by link token\n      const device = this.devices.find(d => d.lt === lt);\n\n      // Don't do anything if this is the current device\n      if (device.lt === this.$store.getters.lt) {\n        return;\n      }\n\n      // Check if we can switch to this device\n      if (!this.canSwitchToDevice(device)) {\n        // Show popup notification if device can't be switched\n        if (!device.model.includes('Mac')) {\n          this.$notify({\n            type: 'error',\n            text: this.$t(\"CAN_BE_USED_ONLY_DIRECTLY_NOTICE\")\n          });\n        } else {\n          this.$notify({\n            type: 'error',\n            text: this.$t(\"USE_APPDB_TOOLS_TO_SWITCH_TO_MAC\")\n          });\n        }\n        return;\n      }\n\n      // Switch to the device\n      this.switchDevice(lt, linkType);\n    },\n    removeDevice(lt) {\n      this.$confirm(this.$t('DEVICE_REMOVAL_WARNING'))\n        .then(() => {\n          this.deviceRemoving = lt;\n        })\n        .then(() => this.$api.unlinkDevice(lt))\n        .then(() => this.$store.dispatch('getDevices'))\n        .finally(() => {\n          this.deviceRemoving = null;\n        });\n    },\n    getCode() {\n      this.$api.getLinkCode().then((code) => {\n        this.code = code;\n      });\n    },\n  },\n  created() {\n    this.getCode();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/variables\";\n\n.main {\n  display: block;\n  flex-grow: 1;\n}\n\n.instruction {\n  margin-bottom: 15px;\n  font-size: 14px;\n}\n\n.row {\n  display: flex;\n\n  @include notebook {\n    flex-direction: column;\n  }\n}\n\n.devices {\n  flex-grow: 1;\n}\n\n.device {\n  display: flex;\n  padding: 10px;\n  align-items: center;\n  border-radius: 4px;\n  @include transition;\n  cursor: pointer;\n  position: relative;\n  border: 1px solid transparent;\n\n  &:not(:first-child) {\n    margin-top: 5px;\n  }\n\n  &:hover:not(&_active):not(&_disabled) {\n    background-color: var(--tertiary-bg);\n  }\n\n  @include notebook {\n    border: 1px solid var(--tertiary-accent);\n\n    &_switchable {\n      border-color: transparent;\n    }\n  }\n\n  &_active {\n    box-shadow: var(--my-device-shadow);\n    border-color: transparent;\n  }\n\n  &_disabled {\n    pointer-events: none;\n    opacity: 0.7;\n  }\n\n  &_switchable {\n    @include notebook {\n      &:after {\n        content: \"\";\n        position: absolute;\n        right: 10px;\n        top: 50%;\n        transform: translateY(-50%);\n        width: 8px;\n        height: 8px;\n        border-radius: 50%;\n        background-color: var(--success-text);\n      }\n    }\n  }\n\n  &__img-wrapper {\n    flex: 0 0 44px;\n    text-align: center;\n    margin-right: 15px;\n  }\n\n  &__img {\n    height: 45px;\n    filter: var(--img-filter);\n  }\n\n  &__title {\n    font-weight: 500;\n    display: flex;\n    align-items: center;\n    margin-bottom: 5px;\n  }\n\n  &__pro {\n    text-transform: uppercase;\n    background: $primary;\n    font-size: 11px;\n    font-weight: 700;\n    color: #fff;\n    padding: 3px 3px 2px;\n    margin-left: 5px;\n  }\n\n  &__remove {\n    color: #fa6565;\n    margin-left: 5px;\n  }\n\n  &__desc {\n    flex-grow: 1;\n  }\n\n  &__info {\n    line-height: 21px;\n  }\n\n  &__jail {\n    white-space: nowrap;\n    border-radius: 2.5px;\n    font-size: 12px;\n    padding: 1px 3px 2px;\n    line-height: 10px;\n    position: relative;\n    top: -1px;\n    margin-left: 2px;\n    background: var(--tertiary-accent);\n    color: var(--text-tertiary-accent);\n\n    &_active {\n      background: var(--bg-success);\n      color: #053305;\n    }\n  }\n\n  &__switch {\n    text-align: center;\n    transition: opacity 0.3s ease, transform 0.3s ease;\n    opacity: 1;\n    transform: translateY(0);\n\n    @include notebook {\n      display: none;\n    }\n  }\n\n  &__button {\n    background: var(--bg);\n    border: 1px solid lighten($primary, 20%);\n    border-radius: 2px;\n    color: var(--text-primary);\n    font-size: 12px;\n    padding: 3px 15px;\n    transition: all 0.2s ease;\n\n    &:hover {\n      background: lighten($primary, 45%);\n    }\n  }\n\n  &__switch-text {\n    color: $text-secondary;\n    font-size: 12px;\n    margin-top: 2px;\n    transition: color 0.2s ease;\n  }\n\n  &__mobile-indicator {\n    display: none;\n\n    @include notebook {\n      display: block;\n      position: absolute;\n      right: 10px;\n      top: 50%;\n      transform: translateY(-50%);\n      font-size: 12px;\n      color: var(--text-secondary);\n    }\n  }\n\n  &__mobile-switch {\n    color: var(--success-text);\n    font-weight: 500;\n  }\n\n  &__mobile-no-switch {\n    color: var(--text-secondary);\n  }\n}\n\n.link {\n  width: 200px;\n  margin-left: 50px;\n  background: var(--secondary-bg);\n  border-radius: 8px;\n  padding: 10px;\n  text-align: center;\n\n  @include notebook {\n    margin: 15px auto 0;\n    width: 100%;\n    max-width: 400px;\n  }\n\n  &__title {\n    font-weight: 500;\n    margin-bottom: 10px;\n    text-align: left;\n  }\n\n  &__text {\n    line-height: 15px;\n    text-align: left;\n  }\n\n  &__code {\n    display: block;\n    font-size: 20px;\n    font-weight: 600;\n    letter-spacing: 5px;\n    margin: 10px 0 5px;\n  }\n\n  &__qr {\n    margin-top: 10px;\n    margin-bottom: 15px;\n  }\n\n  &__list {\n    list-style: decimal inside;\n    text-align: left;\n\n    &::v-deep {\n      li {\n        margin-bottom: 3px;\n        line-height: 18px;\n      }\n\n      strong {\n        font-weight: bold;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Devices.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Devices.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Devices.vue?vue&type=template&id=438ab6e2&scoped=true\"\nimport script from \"./Devices.vue?vue&type=script&lang=js\"\nexport * from \"./Devices.vue?vue&type=script&lang=js\"\nimport style0 from \"./Devices.vue?vue&type=style&index=0&id=438ab6e2&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"438ab6e2\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Devices.vue?vue&type=style&index=0&id=438ab6e2&prod&lang=scss&scoped=true\""],"sourceRoot":""}