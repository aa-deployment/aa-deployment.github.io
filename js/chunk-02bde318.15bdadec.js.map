{"version":3,"sources":["webpack:///./src/views/My/Devices.vue","webpack:///src/views/My/Devices.vue","webpack:///./src/views/My/Devices.vue?041f","webpack:///./src/views/My/Devices.vue?4de9","webpack:///./src/views/My/Devices.vue?f9c5"],"names":["render","_vm","this","_c","_self","staticClass","attrs","$t","isMobile","email","devices","emailChangeLink","_l","device","key","lt","class","device_active","$store","getters","device_disabled","deviceRemoving","device_switchable","canSwitchToDevice","transitioning","on","$event","switchDeviceMobile","link_type","icon","_v","_s","model","plus","_e","ref","refInFor","preventDefault","removeDevice","ios","switchDevice","isSwitchBack","href","code","qrCodeBg","concat","domProps","link","staticRenderFns","components","qrcode","QrcodeVue","HtmlWithLinks","data","title","isItselfLinkable","computed","_objectSpread","mapState","deviceStr","currentDevice","_this","find","methods","oldLinkToken","localStorage","getItem","console","log","currentLinkType","config","deviceLinkType","deviceLt","match","getDeviceLinkType","deviceModel","toLowerCase","includes","some","d","removeItem","linkType","_this2","setItem","commit","dispatch","then","getCode","finally","setTimeout","e","$refs","el","target","$notify","type","text","_this3","$confirm","$api","unlinkDevice","_this4","getLinkCode","created","component"],"mappings":"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","file":"js/chunk-02bde318.15bdadec.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{staticClass:\"main\"},[_c('html-with-links',{staticClass:\"intro\",attrs:{\"tag\":\"h1\",\"html\":_vm.$t('THIS_' + (_vm.isMobile ? 'DEVICE' : 'COMPUTER') + '_IS_LINKED_TO_APPDB', {\n        email: (_vm.devices[0] || {}).email,\n        emailChangeLink: '/my/change-email'\n    })}}),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"devices\"},_vm._l((_vm.devices),function(device){return _c('div',{key:device.lt,staticClass:\"device\",class:{\n          device_active: device.lt === _vm.$store.getters.lt,\n          device_disabled: _vm.deviceRemoving === device.lt,\n          device_switchable: device.lt !== _vm.$store.getters.lt && _vm.canSwitchToDevice(device) && !_vm.transitioning\n        },on:{\"click\":function($event){return _vm.switchDeviceMobile(device.lt, device.link_type, $event)}}},[_c('div',{staticClass:\"device__img-wrapper\"},[_c('img',{staticClass:\"device__img\",attrs:{\"src\":device.icon}})]),_c('div',{staticClass:\"device__desc\"},[_c('span',{staticClass:\"device__title\"},[_vm._v(\"\\n            \"+_vm._s(device.model)+\"\\n            \"),(device.plus)?_c('span',{staticClass:\"device__pro\"},[_vm._v(\"Plus\")]):_vm._e(),(device.lt !== _vm.$store.getters.lt)?_c('a',{ref:\"removeDevice\",refInFor:true,staticClass:\"device__remove\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.removeDevice(device.lt)}}},[_vm._v(_vm._s(_vm.deviceRemoving === device.lt\n                  ? _vm.$t(\"REMOVING\")\n                  : _vm.$t(\"REMOVE\")))]):_vm._e()]),_c('span',{staticClass:\"device__info\"},[_vm._v(_vm._s(device.ios))])]),(device.lt !== _vm.$store.getters.lt && _vm.canSwitchToDevice(device) && !_vm.transitioning)?_c('div',{staticClass:\"device__switch\"},[_c('button',{staticClass:\"device__button\",on:{\"click\":function($event){$event.preventDefault();return _vm.switchDevice(device.lt, device.link_type)}}},[_vm._v(\"\\n            \"+_vm._s(_vm.isSwitchBack(device) ? _vm.$t(\"SWITCH_BACK\") : _vm.$t(\"SWITCH\"))+\"\\n          \")]),_c('div',{staticClass:\"device__switch-text\"},[_vm._v(_vm._s(_vm.$t(\"TO_THIS_DEVICE\")))])]):(device.lt !== _vm.$store.getters.lt && !_vm.canSwitchToDevice(device) && !_vm.transitioning)?_c('div',{staticClass:\"device__switch\"},[_c('div',{staticClass:\"device__switch-text\"},[_vm._v(_vm._s(_vm.$t(\"CAN_BE_USED_ONLY_DIRECTLY\")))])]):_vm._e(),_c('div',{staticClass:\"device__mobile-indicator\"},[(device.lt === _vm.$store.getters.lt)?_c('span',{staticClass:\"device__mobile-no-switch\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"SELECTED_DEVICE\"))+\"\\n          \")]):(_vm.canSwitchToDevice(device) && !_vm.transitioning)?_c('span',{staticClass:\"device__mobile-switch\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"SWITCH\"))+\" →\\n          \")]):(!_vm.canSwitchToDevice(device) && !_vm.transitioning)?_c('span',{staticClass:\"device__mobile-no-switch\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"CAN_BE_USED_ONLY_DIRECTLY\"))+\"\\n          \")]):(_vm.transitioning)?_c('span',{staticClass:\"device__mobile-switch\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"SWITCHING\"))+\"...\\n          \")]):_vm._e()])])}),0),_c('div',{staticClass:\"link\"},[_c('html-with-links',{staticClass:\"link__title\",attrs:{\"tag\":\"h2\",\"html\":_vm.$t('LINK_NEW_APPLE_SILICON_MAC_USE_APPDB_TOOLS', {          \n        href: '/appdb-tools'\n    })}}),_c('h2',{staticClass:\"link__title\"},[_vm._v(_vm._s(_vm.$t(\"LINK_NEW_DEVICE\")))]),_c('p',{staticClass:\"link__text\"},[_c('a',{attrs:{\"href\":\"https://www.youtube.com/watch?v=Tp3chHFX0NE\",\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.$t('VIDEO_TUTORIAL')))]),_c('br'),_c('br')]),_c('p',{staticClass:\"link__text\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t(\"IF_YOU_NEED_TO_LINK_NEW_DEVICE_HERES_CODE\"))+\"\\n      \")]),_c('span',{staticClass:\"link__code\"},[_vm._v(_vm._s(_vm.code))]),_c('qrcode',{staticClass:\"link__qr\",attrs:{\"background\":_vm.qrCodeBg,\"value\":`https://a.appdb.to/add/?${_vm.code}`}}),_c('h2',{staticClass:\"link__title\"},[_vm._v(_vm._s(_vm.$t(\"TO_LINK_APPLE_TV\")))]),_c('ul',{staticClass:\"link__list\",domProps:{\"innerHTML\":_vm._s(\n          _vm.$t('LINK_APPLE_TV_STEPS', {\n            link: `https://a.appdb.to/add/?${_vm.code}`,\n          })\n        )}})],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"main\">\n    <html-with-links\n      tag=\"h1\"\n      class=\"intro\"\n      :html=\"$t('THIS_' + (isMobile ? 'DEVICE' : 'COMPUTER') + '_IS_LINKED_TO_APPDB', {\n          email: (devices[0] || {}).email,\n          emailChangeLink: '/my/change-email'\n      })\"\n    />\n    <div class=\"row\">\n      <div class=\"devices\">\n        <div\n          class=\"device\"\n          v-for=\"device in devices\"\n          :class=\"{\n            device_active: device.lt === $store.getters.lt,\n            device_disabled: deviceRemoving === device.lt,\n            device_switchable: device.lt !== $store.getters.lt && canSwitchToDevice(device) && !transitioning\n          }\"\n          :key=\"device.lt\"\n          @click=\"switchDeviceMobile(device.lt, device.link_type, $event)\"\n        >\n          <div class=\"device__img-wrapper\">\n            <img class=\"device__img\" :src=\"device.icon\" />\n          </div>\n          <div class=\"device__desc\">\n            <span class=\"device__title\">\n              {{ device.model }}\n              <span v-if=\"device.plus\" class=\"device__pro\">Plus</span>\n              <a\n                v-if=\"device.lt !== $store.getters.lt\"\n                ref=\"removeDevice\"\n                href=\"#\"\n                class=\"device__remove\"\n                @click.prevent=\"removeDevice(device.lt)\"\n                >{{\n                  deviceRemoving === device.lt\n                    ? $t(\"REMOVING\")\n                    : $t(\"REMOVE\")\n                }}</a\n              >\n            </span>\n            <span class=\"device__info\"\n              >{{ device.ios }}</span\n            >\n          </div>\n          <div class=\"device__switch\" v-if=\"device.lt !== $store.getters.lt && canSwitchToDevice(device) && !transitioning\">\n            <button\n              class=\"device__button\"\n              @click.prevent=\"switchDevice(device.lt, device.link_type)\"\n            >\n              {{ isSwitchBack(device) ? $t(\"SWITCH_BACK\") : $t(\"SWITCH\") }}\n            </button>\n            <div class=\"device__switch-text\">{{ $t(\"TO_THIS_DEVICE\") }}</div>\n          </div>\n          <div class=\"device__switch\" v-else-if=\"device.lt !== $store.getters.lt && !canSwitchToDevice(device) && !transitioning\">\n            <div class=\"device__switch-text\">{{ $t(\"CAN_BE_USED_ONLY_DIRECTLY\") }}</div>\n          </div>\n          <div class=\"device__mobile-indicator\">\n            <span v-if=\"device.lt === $store.getters.lt\" class=\"device__mobile-no-switch\">\n              {{ $t(\"SELECTED_DEVICE\") }}\n            </span>\n            <span v-else-if=\"canSwitchToDevice(device) && !transitioning\" class=\"device__mobile-switch\">\n              {{ $t(\"SWITCH\") }} →\n            </span>\n            <span v-else-if=\"!canSwitchToDevice(device) && !transitioning\" class=\"device__mobile-no-switch\">\n              {{ $t(\"CAN_BE_USED_ONLY_DIRECTLY\") }}\n            </span>\n            <span v-else-if=\"transitioning\" class=\"device__mobile-switch\">\n              {{ $t(\"SWITCHING\") }}...\n            </span>\n          </div>\n        </div>\n      </div>\n      <div class=\"link\">\n\n        <html-with-links\n      tag=\"h2\"\n      class=\"link__title\"\n      :html=\"$t('LINK_NEW_APPLE_SILICON_MAC_USE_APPDB_TOOLS', {          \n          href: '/appdb-tools'\n      })\"\n        />\n        <h2 class=\"link__title\">{{ $t(\"LINK_NEW_DEVICE\") }}</h2>\n        <p class=\"link__text\">\n          <a href=\"https://www.youtube.com/watch?v=Tp3chHFX0NE\" target=\"_blank\">{{ $t('VIDEO_TUTORIAL') }}</a><br/><br/>\n        </p>\n        <p class=\"link__text\">\n          {{ $t(\"IF_YOU_NEED_TO_LINK_NEW_DEVICE_HERES_CODE\") }}\n        </p>\n        <span class=\"link__code\">{{ code }}</span>\n        <qrcode class=\"link__qr\" :background=\"qrCodeBg\" :value=\"`https://a.appdb.to/add/?${code}`\" />\n        <h2 class=\"link__title\">{{ $t(\"TO_LINK_APPLE_TV\") }}</h2>\n        <ul\n          class=\"link__list\"\n          v-html=\"\n            $t('LINK_APPLE_TV_STEPS', {\n              link: `https://a.appdb.to/add/?${code}`,\n            })\n          \"\n        ></ul>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport isItselfLinkable from '@/utils/isItselfLinkable';\nimport QrcodeVue from 'qrcode.vue';\nimport { mapState } from 'vuex';\n\nimport HtmlWithLinks from '@/components/HtmlWithLinks.vue';\n\nexport default {\n  components: { qrcode: QrcodeVue, HtmlWithLinks },\n  data() {\n    return {\n      title: 'My devices',\n      code: '',\n      isMobile: isItselfLinkable(),\n      deviceRemoving: null,\n      transitioning: false,\n    };\n  },\n  computed: {\n    ...mapState(['theme', 'config']),\n    qrCodeBg() {\n      // Always return white for QR code background regardless of theme\n      return '#FFFFFF';\n    },\n    devices() {\n      return this.$store.getters.devices;\n    },\n    deviceStr() {\n      return isItselfLinkable() ? 'iPhone/iPad/iPod/Vision Pro' : 'PC/Mac';\n    },\n    currentDevice() {\n      return this.devices.find(device => device.lt === this.$store.getters.lt) || {};\n    },\n  },\n  methods: {\n    isSwitchBack(device) {\n      const oldLinkToken = localStorage.getItem('old_lt');\n      // Debug output to check values\n      console.log('Switch back check:', {\n        currentLinkType: this.config.link_type,\n        deviceLinkType: device.link_type, \n        oldLinkToken: oldLinkToken,\n        deviceLt: device.lt,\n        match: oldLinkToken === device.lt\n      });\n      \n      // Handle the case where device.link_type is not available\n      const deviceLinkType = device.link_type || this.getDeviceLinkType(device);\n      \n      return this.config.link_type === 'mdm' && \n             deviceLinkType === 'profile' && \n             oldLinkToken === device.lt;\n    },\n    getDeviceLinkType(device) {\n      // Fallback logic to determine device link_type\n      // You may need to adjust this based on your specific app logic\n      const deviceModel = device.model.toLowerCase();\n      if (deviceModel.includes('mac')) {\n        return 'profile'; // Macs typically use profiles\n      }\n      // Default to MDM for other devices if we can't determine\n      return 'mdm';\n    },\n    canSwitchToDevice(device) {\n      if (this.transitioning) {\n        return false;\n      }\n      \n      const oldLinkToken = localStorage.getItem('old_lt');\n      const deviceLinkType = device.link_type || this.getDeviceLinkType(device);\n      \n      // Case 1: current is MDM\n      if (this.config.link_type === 'mdm') {\n        // Can always switch to MDM devices\n        if (deviceLinkType === 'mdm') {\n          return true;\n        }\n        \n        // For profile devices, check if it matches the old_lt\n        if (deviceLinkType === 'profile') {\n          // If old_lt exists but doesn't match any device, clear it\n          if (oldLinkToken && !this.devices.some(d => d.lt === oldLinkToken)) {\n            localStorage.removeItem('old_lt');\n            return false;\n          }\n          \n          // Can switch to profile device only if it matches old_lt\n          return oldLinkToken === device.lt;\n        }\n      }\n      \n      // Case 2: current is profile\n      if (this.config.link_type === 'profile') {\n        // Can switch to MDM devices\n        if (deviceLinkType === 'mdm') {\n          return true;\n        }\n        \n        // For profile devices, check if old_lt doesn't match\n        if (deviceLinkType === 'profile') {\n          // Cannot switch to other profile devices\n          return false;\n        }\n      }\n      \n      // Default fallback\n      return true;\n    },\n    switchDevice(lt, linkType) {\n      this.transitioning = true;\n      \n      if (this.config.link_type === 'profile') {\n        localStorage.setItem('old_lt', this.$store.getters.lt);\n      }\n      \n      this.$store.commit('lt', lt);\n      this.$store.commit('setConfig', {});\n      \n      this.$store.dispatch('getConfig')\n        .then(() => {\n          this.getCode();\n        })\n        .finally(() => {\n          setTimeout(() => {\n            this.transitioning = false;\n          }, 300);\n        });\n    },\n    switchDeviceMobile(lt, linkType, e) {\n      // Check if this is a click on the remove device button\n      if (this.$refs.removeDevice && this.$refs.removeDevice.some(el => el === e.target)) {\n        return;\n      }\n      \n      // Get the device by link token\n      const device = this.devices.find(d => d.lt === lt);\n      \n      // Don't do anything if this is the current device\n      if (device.lt === this.$store.getters.lt) {\n        return;\n      }\n      \n      // Check if we can switch to this device\n      if (!this.canSwitchToDevice(device)) {\n        // Show popup notification if device can't be switched\n        this.$notify({\n          type: 'error',\n          text: this.$t(\"CAN_BE_USED_ONLY_DIRECTLY_NOTICE\")\n        });\n        return;\n      }\n      \n      // Switch to the device\n      this.switchDevice(lt, linkType);\n    },\n    removeDevice(lt) {\n      this.$confirm(this.$t('DEVICE_REMOVAL_WARNING'))\n        .then(() => {\n          this.deviceRemoving = lt;\n        })\n        .then(() => this.$api.unlinkDevice(lt))\n        .then(() => this.$store.dispatch('getDevices'))\n        .finally(() => {\n          this.deviceRemoving = null;\n        });\n    },\n    getCode() {\n      this.$api.getLinkCode().then((code) => {\n        this.code = code;\n      });\n    },\n  },\n  created() {\n    this.getCode();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/variables\";\n\n.main {\n  display: block;\n  flex-grow: 1;\n}\n\n.instruction {\n  margin-bottom: 15px;\n  font-size: 14px;\n}\n\n.row {\n  display: flex;\n\n  @include notebook {\n    flex-direction: column;\n  }\n}\n\n.devices {\n  flex-grow: 1;\n}\n\n.device {\n  display: flex;\n  padding: 10px;\n  align-items: center;\n  border-radius: 4px;\n  @include transition;\n  cursor: pointer;\n  position: relative;\n  border: 1px solid transparent;\n\n  &:not(:first-child) {\n    margin-top: 5px;\n  }\n\n  &:hover:not(&_active):not(&_disabled) {\n    background-color: var(--tertiary-bg);\n  }\n\n  @include notebook {\n    border: 1px solid var(--tertiary-accent);\n    &_switchable {\n      border-color: transparent;\n    }\n  }\n\n  &_active {\n    box-shadow: var(--my-device-shadow);\n    border-color: transparent;\n  }\n\n  &_disabled {\n    pointer-events: none;\n    opacity: 0.7;\n  }\n\n  &_switchable {\n    @include notebook {\n      &:after {\n        content: \"\";\n        position: absolute;\n        right: 10px;\n        top: 50%;\n        transform: translateY(-50%);\n        width: 8px;\n        height: 8px;\n        border-radius: 50%;\n        background-color: var(--success-text);\n      }\n    }\n  }\n\n  &__img-wrapper {\n    flex: 0 0 44px;\n    text-align: center;\n    margin-right: 15px;\n  }\n\n  &__img {\n    height: 45px;\n    filter: var(--img-filter);\n  }\n\n  &__title {\n    font-weight: 500;\n    display: flex;\n    align-items: center;\n    margin-bottom: 5px;\n  }\n\n  &__pro {\n    text-transform: uppercase;\n    background: $primary;\n    font-size: 11px;\n    font-weight: 700;\n    color: #fff;\n    padding: 3px 3px 2px;\n    margin-left: 5px;\n  }\n\n  &__remove {\n    color: #fa6565;\n    margin-left: 5px;\n  }\n\n  &__desc {\n    flex-grow: 1;\n  }\n\n  &__info {\n    line-height: 21px;\n  }\n\n  &__jail {\n    white-space: nowrap;\n    border-radius: 2.5px;\n    font-size: 12px;\n    padding: 1px 3px 2px;\n    line-height: 10px;\n    position: relative;\n    top: -1px;\n    margin-left: 2px;\n    background: var(--tertiary-accent);\n    color: var(--text-tertiary-accent);\n\n    &_active {\n      background: var(--bg-success);\n      color: #053305;\n    }\n  }\n\n  &__switch {\n    text-align: center;\n    transition: opacity 0.3s ease, transform 0.3s ease;\n    opacity: 1;\n    transform: translateY(0);\n\n    @include notebook {\n      display: none;\n    }\n  }\n\n  &__button {\n    background: var(--bg);\n    border: 1px solid lighten($primary, 20%);\n    border-radius: 2px;\n    color: var(--text-primary);\n    font-size: 12px;\n    padding: 3px 15px;\n    transition: all 0.2s ease;\n    \n    &:hover {\n      background: lighten($primary, 45%);\n    }\n  }\n\n  &__switch-text {\n    color: $text-secondary;\n    font-size: 12px;\n    margin-top: 2px;\n    transition: color 0.2s ease;\n  }\n\n  &__mobile-indicator {\n    display: none;\n    \n    @include notebook {\n      display: block;\n      position: absolute;\n      right: 10px;\n      top: 50%;\n      transform: translateY(-50%);\n      font-size: 12px;\n      color: var(--text-secondary);\n    }\n  }\n  \n  &__mobile-switch {\n    color: var(--success-text);\n    font-weight: 500;\n  }\n  \n  &__mobile-no-switch {\n    color: var(--text-secondary);\n  }\n}\n\n.link {\n  width: 200px;\n  margin-left: 50px;\n  background: var(--secondary-bg);\n  border-radius: 8px;\n  padding: 10px;\n  text-align: center;\n\n  @include notebook {\n    margin: 15px auto 0;\n    width: 100%;\n    max-width: 400px;\n  }\n\n  &__title {\n    font-weight: 500;\n    margin-bottom: 10px;\n    text-align: left;\n  }\n\n  &__text {\n    line-height: 15px;\n    text-align: left;\n  }\n\n  &__code {\n    display: block;\n    font-size: 20px;\n    font-weight: 600;\n    letter-spacing: 5px;\n    margin: 10px 0 5px;\n  }\n\n  &__qr {\n    margin-top: 10px;\n    margin-bottom: 15px;\n  }\n\n  &__list {\n    list-style: decimal inside;\n    text-align: left;\n\n    &::v-deep {\n      li {\n        margin-bottom: 3px;\n        line-height: 18px;\n      }\n\n      strong {\n        font-weight: bold;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Devices.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Devices.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Devices.vue?vue&type=template&id=6dfe1e28&scoped=true\"\nimport script from \"./Devices.vue?vue&type=script&lang=js\"\nexport * from \"./Devices.vue?vue&type=script&lang=js\"\nimport style0 from \"./Devices.vue?vue&type=style&index=0&id=6dfe1e28&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6dfe1e28\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Devices.vue?vue&type=style&index=0&id=6dfe1e28&prod&lang=scss&scoped=true\""],"sourceRoot":""}